<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Java on Stephen's technical blog</title><link>https://stephenc.github.io/tags/java/</link><description>Recent content in Java on Stephen's technical blog</description><generator>Hugo</generator><language>en-gb</language><lastBuildDate>Mon, 05 Dec 2016 00:00:00 +0000</lastBuildDate><atom:link href="https://stephenc.github.io/tags/java/index.xml" rel="self" type="application/rss+xml"/><item><title>The costs of guarding logging with Apache Log4J version 2</title><link>https://stephenc.github.io/post/2016-12-05-guarding-logging-log4j/</link><pubDate>Mon, 05 Dec 2016 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2016-12-05-guarding-logging-log4j/</guid><description>&lt;p&gt;Another interesting tidbit:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debug1Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at %s&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;guardedDebug1Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (LOGGER.&lt;span style="color:#a6e22e"&gt;isDebugEnabled&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at %s&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Gives the following benchmark results:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Benchmark Mode Cnt Score Error Units
Log4jBenchmark.debug1Arg_date thrpt 20 179653191.248 ± 2731044.349 ops/s
Log4jBenchmark.guardedDebug1Arg_date thrpt 20 207001790.376 ± 2074020.617 ops/s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We can also compare guarding with SLF4J over logback&lt;/p&gt;</description></item><item><title>The costs of Java Utils Logging</title><link>https://stephenc.github.io/post/2016-12-05-costs-java-utils-logging/</link><pubDate>Mon, 05 Dec 2016 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2016-12-05-costs-java-utils-logging/</guid><description>&lt;p&gt;One of my colleagues had a question:&lt;/p&gt;
&lt;blockquote class="twitter-tweet"&gt;
 &lt;a href="https://twitter.com/bmathus/status/805646932819537920"&gt;&lt;/a&gt;
&lt;/blockquote&gt;

&lt;script async src="https://platform.x.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;Now for some context, when the Jenkins project started off, Kohsuke was working for Sun and felt it would be wrong, as a Sun employee, to use a logging framework other than that provided by the JVM as using a different logging framework could be seen as being implication that the built in Java Utils Logging framework was a steaming pile of excrement.&lt;/p&gt;</description></item><item><title>The costs of other logging frameworks</title><link>https://stephenc.github.io/post/2016-12-05-costs-other-logging-frameworks/</link><pubDate>Mon, 05 Dec 2016 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2016-12-05-costs-other-logging-frameworks/</guid><description>&lt;p&gt;You asked for it.&lt;/p&gt;
&lt;p&gt;Logback:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debug1Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at {}&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debug2Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at {}&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time), &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debugNArg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at {}&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time), &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;static&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ch.&lt;span style="color:#a6e22e"&gt;qos&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;logback&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;classic&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Logger&lt;/span&gt; root &lt;span style="color:#f92672"&gt;=&lt;/span&gt; (ch.&lt;span style="color:#a6e22e"&gt;qos&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;logback&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;classic&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Logger&lt;/span&gt;)LoggerFactory.&lt;span style="color:#a6e22e"&gt;getLogger&lt;/span&gt;(org.&lt;span style="color:#a6e22e"&gt;slf4j&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Logger&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;ROOT_LOGGER_NAME&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; root.&lt;span style="color:#a6e22e"&gt;setLevel&lt;/span&gt;(ch.&lt;span style="color:#a6e22e"&gt;qos&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;logback&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;classic&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Level&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;INFO&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And the benchmarks&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Benchmark Mode Cnt Score Error Units 
LogbackBenchmark.debug1Arg_date thrpt 20 221056534.656 ± 8549233.826 ops/s
LogbackBenchmark.debug2Arg_date thrpt 20 220576341.742 ± 3778270.898 ops/s
LogbackBenchmark.debugNArg_date thrpt 20 134887126.088 ± 2973182.812 ops/s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;JUL over SLF4J (same benchmark code but different dependency)&lt;/p&gt;</description></item><item><title>Log4j 2.0 Async loggers and immutability</title><link>https://stephenc.github.io/post/2014-07-28-log4j-20-async-loggers-and-immutability/</link><pubDate>Mon, 28 Jul 2014 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2014-07-28-log4j-20-async-loggers-and-immutability/</guid><description>&lt;p&gt;One of the headline grabbing things that people seem to be raving about over Log4J 2.0 is async loggers.&lt;/p&gt;
&lt;p&gt;Now do not get me wrong, they are great… as long as you know what you are doing.&lt;/p&gt;
&lt;p&gt;If you are using async loggers you had better make sure you are only passing immutable objects to your loggers, because otherwise you may end up logging the state of your objects at the time of the log record being written and &lt;em&gt;not the time you called log&lt;/em&gt;.&lt;/p&gt;</description></item><item><title>OpenEjb, Jetty and Maven - Transaction Management</title><link>https://stephenc.github.io/post/2010-03-01-openejb-jetty-and-maven-transaction-management/</link><pubDate>Mon, 01 Mar 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-03-01-openejb-jetty-and-maven-transaction-management/</guid><description>&lt;p&gt;I&amp;rsquo;ve been meaning to blog about getting transaction management working with OpenEjb and Jetty using jetty:run&amp;hellip; it&amp;rsquo;s still an on-going story&amp;hellip; but the following might get you going&amp;hellip;First off, in your pom.xml you need to add the configuration for maven-jetty-plugin&amp;hellip; we need to dance around the various activemq/activeio versions and ensure that we get the correct version of ant&amp;hellip; &amp;lt;project xmlns=&amp;ldquo;&lt;a href="http://maven.apache.org/POM/4.0.0%22"&gt;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/a&gt; xmlns:xsi=&amp;ldquo;&lt;a href="http://www.w3.org/2001/XMLSchema-instance%22"&gt;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/a&gt;          xsi:schemaLocation=&amp;ldquo;&lt;a href="http://maven.apache.org/POM/4.0.0"&gt;http://maven.apache.org/POM/4.0.0&lt;/a&gt; &lt;a href="http://maven.apache.org/maven-v4_0_0.xsd%22%3E"&gt;http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&amp;gt;&lt;/a&gt;     &lt;!-- raw HTML omitted --&gt;4.0.0&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;org.apache.openejb.examples&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;jetty-openejb&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;war&lt;!-- raw HTML omitted --&gt;     &lt;!-- raw HTML omitted --&gt;1.0-SNAPSHOT&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;jetty-openejb Maven Webapp&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;&lt;a href="http://maven.apache.org"&gt;http://maven.apache.org&lt;/a&gt;&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;         &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;3.8.1&lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;test&lt;!-- raw HTML omitted --&gt;         &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;${project.artifactId}&lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;org.mortbay.jetty&lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;maven-jetty-plugin&lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;6.1.22&lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;activemq-core&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;4.1.1&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging-api&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;activemq-ra&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;4.1.1&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging-api&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;3.1.2&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging-api&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.openejb&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;openejb-core&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;3.1.2&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;activemq-core&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;activemq-ra&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                                        &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.mortbay.jetty&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;jsp-2.1-jetty&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;6.1.22&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;ant&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;ant&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;${basedir}/src/main/jetty/jetty.xml&lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;     &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Next we need to configure a src/main/jetty/jetty.xml to bind the UserTransaction instance into jetty&amp;hellip; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;java.naming.factory.initial&lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;org.apache.openejb.client.LocalInitialContextFactory&lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;openejb:TransactionManager&lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;     &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;                     &lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;And presto-chango, now jetty has a transaction manager provided by openejb.  (Note: if we don&amp;rsquo;t mind storing that in a jetty-env in /WEB-INF, you can put the same config in WEB-INF/jetty-env.xml) OK, so here are the issues:Reloading does not work (because org.apache.openejb.core.ivm.naming.IvmContext does not support the destroySubcontext(Context) methodWe are using jetty&amp;rsquo;s JNDI provider in the web-app and openejb&amp;rsquo;s JNDI provider for the EJBs&amp;hellip; this is because When jetty binds names to JNDI (using org.mortbay.jetty.plus.naming.Resource or org.mortbay.jetty.plus.naming.Transaction) it binds the object to JNDIName and it also binds a NamingEnrtry for the object to __/JNDIName Unfortunately, openejb&amp;rsquo;s JNDI implementation seems to be somewhat strange in this regard&amp;hellip; if we add the SystemProperties to jetty to have it use openejb&amp;rsquo;s JNDI implementation, e.g. add the following to /project/build/plugins/plugin[maven-jetty-plugin]/configuration/systemProperties                         &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;java.naming.factory.initial&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;org.apache.openejb.client.LocalInitialContextFactory&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;Then when we bind &lt;strong&gt;/UserTransaction it gets bound to openejb:&lt;/strong&gt;/UserTransaction but when we lookup &lt;strong&gt;/UserTransaction openejb looks up openejb:local/&lt;/strong&gt;/UserTransaction And that is just for starters&amp;hellip; there seems to be a whole host of other JNDI strangeness between jetty&amp;rsquo;s side and openejb&amp;rsquo;s sideThe side effect of all this is that if you want resource refs to work correctly, you need to fish them out of openejb&amp;rsquo;s JNDI context and push them into jetty&amp;rsquo;s JNDI context In any case this is at least a start!&lt;/p&gt;</description></item><item><title>Acer Aspire One, Huawei E169G and Three IR</title><link>https://stephenc.github.io/post/2008-10-01-acer-aspire-one-huawei-e169g-and-three-ir/</link><pubDate>Wed, 01 Oct 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-10-01-acer-aspire-one-huawei-e169g-and-three-ir/</guid><description>&lt;p&gt;One of my co-workers has asked me to post this up. It&amp;rsquo;s rough and ready, so make of it what you want.First off, Acer recently pushed an update for better performance with the Huawei USB modems&amp;hellip; I&amp;rsquo;m assuming that you have this update&amp;hellip; check if the file /etc/udev/rules.d/10-Huawei-Datacard.rules exists.If that file exists then when you plug in a E169g it will be correctly autodetected without requiring poking about with usbmodeswitch&amp;hellip; it will bind the three serial ports of the E169G to /dev/HuaweiMobile-0, /dev/HuaweiMobile-1 and /dev/HuaweiMobile-2.OK, so assuming you see these device nodes after plugging in the E169G, the next problem is getting wvdial to connect. Here&amp;rsquo;s the wvdial.conf file I use[Dialer Defaults]Init2 = ATZInit3 = ATHInit4 = ATQ0 V1 E1 S0=0 &amp;amp;C1 &amp;amp;D2 +FCLASS=0Stupid Mode = 1Modem Type = USB ModemISDN = 0Phone = *99#Modem = /dev/HuaweiMobile-0Username = usernamePassword = passwordDial Command = ATDTBaud = 460800Init5 = AT+CGDCONT=1,&amp;ldquo;IP&amp;rdquo;,&amp;ldquo;3ireland.ie&amp;quot;By the way, the username is actually &amp;ldquo;username&amp;rdquo;, and the password is actually &amp;ldquo;password&amp;rdquo;.That should be enough to get any self-respecting linux freak 90% of the way there. There was some stuff I had to tweak to get DHCP to populate resolve.conf from the pppd connection&amp;hellip; and I added the following udev rule as 70-huawei-e169g-dial.rulesSUBSYSTEM==&amp;ldquo;usb&amp;rdquo; SYSFS{idProduct}==&amp;ldquo;1001&amp;rdquo;,SYSFS{idVendor}==&amp;ldquo;12d1&amp;rdquo;,RUN+=&amp;quot;/usr/sbin/e169g_dial&amp;quot;And, /usr/sbin/e169g_dial is just#!/bin/shsleep 5/usr/bin/wvdial 2&amp;gt;&amp;amp;1 &amp;gt; /var/log/wvdial &amp;amp;You might be able to tune down from 5 seconds if you can be bothered&amp;hellip; but you need at least some delay&lt;/p&gt;</description></item><item><title>JPA, equals() and hashCode()</title><link>https://stephenc.github.io/post/2007-12-14-jpa-equals-and-hashcode/</link><pubDate>Fri, 14 Dec 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-12-14-jpa-equals-and-hashcode/</guid><description>&lt;p&gt;&lt;a href="http://burtbeckwith.com/blog/?p=53"&gt;http://burtbeckwith.com/blog/?p=53&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Combining Hibernate and Facelets with Maven, Netbeans and Glassfish</title><link>https://stephenc.github.io/post/2007-11-21-combining-hibernate-and-facelets-with-maven-netbeans-and-glassfish/</link><pubDate>Wed, 21 Nov 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-11-21-combining-hibernate-and-facelets-with-maven-netbeans-and-glassfish/</guid><description>&lt;p&gt;Note to self, for later reading&lt;/p&gt;
&lt;p&gt;&lt;a href="http://technology.amis.nl/blog/?p=2610"&gt;http://technology.amis.nl/blog/?p=2610&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Not sure why netbeans is essential on this!&lt;/p&gt;</description></item><item><title>JAX-WS 2.1 madness</title><link>https://stephenc.github.io/post/2007-09-05-jax-ws-21-madness/</link><pubDate>Wed, 05 Sep 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-09-05-jax-ws-21-madness/</guid><description>&lt;p&gt;I am sick of the fun that is getting JAX-WS 2.1 to work on JVM 1.6.&lt;/p&gt;
&lt;p&gt;Oh, copy these four jars into the endorsed directory and then you can use JAX-WS 2.1&amp;hellip; oh but sometimes it won&amp;rsquo;t work for some unknown reason and then it will work again.&lt;/p&gt;
&lt;p&gt;How you are supposed to explain this to end users, I don&amp;rsquo;t know.&lt;/p&gt;
&lt;p&gt;So next you need a platform specific installer to put those jars into the correct location, or a platform specific start script to tell the JVM about my alternate endorsed lib folder&amp;hellip; or do I write a self-extracting jar file that exctracts the libs and forks a second JVM&amp;hellip; no that won&amp;rsquo;t work for people wanting to use my library..&lt;/p&gt;</description></item><item><title>JPA Entity exerciser</title><link>https://stephenc.github.io/post/2007-07-01-jpa-entity-exerciser/</link><pubDate>Fri, 20 Jul 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-07-01-jpa-entity-exerciser/</guid><description>&lt;p&gt;Working on this to add to EasyGloss.&lt;/p&gt;
&lt;p&gt;There are a number of rules that JPA entities must obey:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;equals&lt;/code&gt; and &lt;code&gt;hashCode&lt;/code&gt; must only be based on the persistent fields that are &lt;code&gt;@Id&lt;/code&gt; annotated.&lt;/li&gt;
&lt;li&gt;annotations must be applied to either fields or getters, no mix &amp;amp; match (although future versions of the spec may provide for such)&lt;/li&gt;
&lt;li&gt;In general, getters and setters should be simple methods (i.e. no complex processing)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I want to have a JPA Entity excerciser that will check these rules for you (and can be included in your unit tests)&lt;/p&gt;</description></item></channel></rss>