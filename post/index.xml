<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Stephen's technical blog</title><link>https://stephenc.github.io/post/</link><description>Recent content in Posts on Stephen's technical blog</description><generator>Hugo</generator><language>en-gb</language><lastBuildDate>Tue, 18 Nov 2025 12:00:00 +0000</lastBuildDate><atom:link href="https://stephenc.github.io/post/index.xml" rel="self" type="application/rss+xml"/><item><title>When a Kubernetes Operator Makes Sense</title><link>https://stephenc.github.io/post/2025-11-18-when-a-kubernetes-operator-makes-sense/</link><pubDate>Tue, 18 Nov 2025 12:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2025-11-18-when-a-kubernetes-operator-makes-sense/</guid><description>&lt;h1 id="when-a-kubernetes-operator-makes-sense"&gt;When a Kubernetes Operator Makes Sense&lt;/h1&gt;
&lt;p&gt;&lt;img src="https://stephenc.github.io/images/post/2025-11-18-when-a-kubernetes-operator-makes-sense.png" alt="Simplifying a tangled mess with a Kubernetes Operator"&gt;&lt;/p&gt;
&lt;h2 id="beyond-yaml-real-world-lessons-from-managing-complex-infrastructure"&gt;Beyond YAML: Real-World Lessons from Managing Complex Infrastructure&lt;/h2&gt;
&lt;p&gt;There are plenty of ways to deploy applications onto Kubernetes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;raw &lt;code&gt;kubectl apply&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Kustomize overlays&lt;/li&gt;
&lt;li&gt;Helm charts&lt;/li&gt;
&lt;li&gt;sidecars and init containers&lt;/li&gt;
&lt;li&gt;and, at the far end of the spectrum, fully-fledged operators&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Most teams start at the simple end and stay there. And they should, most applications don’t need anything more complicated than a Deployment, a few ConfigMaps, and a &lt;code&gt;kubectl apply -k&lt;/code&gt;.&lt;/p&gt;</description></item><item><title>Migrating my old blog content to GitHub Pages</title><link>https://stephenc.github.io/post/2025-11-18-migrating-content-to-github-pages/</link><pubDate>Tue, 18 Nov 2025 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2025-11-18-migrating-content-to-github-pages/</guid><description>&lt;p&gt;About 19 years ago, I set up a blog on Google’s Blogger platform to track my adventures learning Java: &lt;a href="https://javaadventure.blogspot.com/"&gt;https://javaadventure.blogspot.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The platform has changed a lot since then, and not always for the better. Many posts no longer render the way they used to, and a few images have disappeared entirely.&lt;/p&gt;
&lt;p&gt;One feature I really loved, which is now broken, was the ability to email a special address and have the message automatically turned into a post. It made publishing effortless… though that was also before I discovered what was then X (née Twitter).&lt;/p&gt;</description></item><item><title>The costs of guarding logging with Apache Log4J version 2</title><link>https://stephenc.github.io/post/2016-12-05-guarding-logging-log4j/</link><pubDate>Mon, 05 Dec 2016 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2016-12-05-guarding-logging-log4j/</guid><description>&lt;p&gt;Another interesting tidbit:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debug1Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at %s&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;guardedDebug1Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (LOGGER.&lt;span style="color:#a6e22e"&gt;isDebugEnabled&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at %s&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Gives the following benchmark results:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Benchmark Mode Cnt Score Error Units
Log4jBenchmark.debug1Arg_date thrpt 20 179653191.248 ± 2731044.349 ops/s
Log4jBenchmark.guardedDebug1Arg_date thrpt 20 207001790.376 ± 2074020.617 ops/s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We can also compare guarding with SLF4J over logback&lt;/p&gt;</description></item><item><title>The costs of Java Utils Logging</title><link>https://stephenc.github.io/post/2016-12-05-costs-java-utils-logging/</link><pubDate>Mon, 05 Dec 2016 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2016-12-05-costs-java-utils-logging/</guid><description>&lt;p&gt;One of my colleagues had a question:&lt;/p&gt;
&lt;blockquote class="twitter-tweet"&gt;
 &lt;a href="https://twitter.com/bmathus/status/805646932819537920"&gt;&lt;/a&gt;
&lt;/blockquote&gt;

&lt;script async src="https://platform.x.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;Now for some context, when the Jenkins project started off, Kohsuke was working for Sun and felt it would be wrong, as a Sun employee, to use a logging framework other than that provided by the JVM as using a different logging framework could be seen as being implication that the built in Java Utils Logging framework was a steaming pile of excrement.&lt;/p&gt;</description></item><item><title>The costs of other logging frameworks</title><link>https://stephenc.github.io/post/2016-12-05-costs-other-logging-frameworks/</link><pubDate>Mon, 05 Dec 2016 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2016-12-05-costs-other-logging-frameworks/</guid><description>&lt;p&gt;You asked for it.&lt;/p&gt;
&lt;p&gt;Logback:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debug1Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at {}&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debug2Arg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at {}&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time), &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Benchmark&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;debugNArg_date&lt;/span&gt;(Blackhole blackhole) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; LOGGER.&lt;span style="color:#a6e22e"&gt;debug&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Started at {}&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; Date(time), &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; time&lt;span style="color:#f92672"&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blackhole.&lt;span style="color:#a6e22e"&gt;consume&lt;/span&gt;(time);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;static&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ch.&lt;span style="color:#a6e22e"&gt;qos&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;logback&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;classic&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Logger&lt;/span&gt; root &lt;span style="color:#f92672"&gt;=&lt;/span&gt; (ch.&lt;span style="color:#a6e22e"&gt;qos&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;logback&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;classic&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Logger&lt;/span&gt;)LoggerFactory.&lt;span style="color:#a6e22e"&gt;getLogger&lt;/span&gt;(org.&lt;span style="color:#a6e22e"&gt;slf4j&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Logger&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;ROOT_LOGGER_NAME&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; root.&lt;span style="color:#a6e22e"&gt;setLevel&lt;/span&gt;(ch.&lt;span style="color:#a6e22e"&gt;qos&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;logback&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;classic&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;Level&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;INFO&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And the benchmarks&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Benchmark Mode Cnt Score Error Units 
LogbackBenchmark.debug1Arg_date thrpt 20 221056534.656 ± 8549233.826 ops/s
LogbackBenchmark.debug2Arg_date thrpt 20 220576341.742 ± 3778270.898 ops/s
LogbackBenchmark.debugNArg_date thrpt 20 134887126.088 ± 2973182.812 ops/s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;JUL over SLF4J (same benchmark code but different dependency)&lt;/p&gt;</description></item><item><title>Version numbers</title><link>https://stephenc.github.io/post/2014-09-08-version-numbers/</link><pubDate>Mon, 08 Sep 2014 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2014-09-08-version-numbers/</guid><description>&lt;p&gt;If there are two only things guaranteed to cause all out war between developers, my vote is that those two things are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Code formatting conventions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Version number conventions&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first is resolved trivially (just shoot anyone suggesting the use of TABs). Until recently most people thought the second was resolved by &lt;a href="http://semver.org/"&gt;semver&lt;/a&gt;… at least until the developer of one of the more commonly used JavaScript libraries &lt;a href="https://github.com/jashkenas/underscore/issues/1805#issuecomment-53939077"&gt;threw the cat amongst the pigeons&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>Log4j 2.0 Async loggers and immutability</title><link>https://stephenc.github.io/post/2014-07-28-log4j-20-async-loggers-and-immutability/</link><pubDate>Mon, 28 Jul 2014 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2014-07-28-log4j-20-async-loggers-and-immutability/</guid><description>&lt;p&gt;One of the headline grabbing things that people seem to be raving about over Log4J 2.0 is async loggers.&lt;/p&gt;
&lt;p&gt;Now do not get me wrong, they are great… as long as you know what you are doing.&lt;/p&gt;
&lt;p&gt;If you are using async loggers you had better make sure you are only passing immutable objects to your loggers, because otherwise you may end up logging the state of your objects at the time of the log record being written and &lt;em&gt;not the time you called log&lt;/em&gt;.&lt;/p&gt;</description></item><item><title>If you don't like Maven, you would not be a good manager...</title><link>https://stephenc.github.io/post/2014-01-30-if-you-dont-like-maven-you-would-not-be-a-good-manager/</link><pubDate>Thu, 30 Jan 2014 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2014-01-30-if-you-dont-like-maven-you-would-not-be-a-good-manager/</guid><description>&lt;p&gt;We have all had the bad technical managers… the ones who tell you to go and do something… and then micromanage the task they have “delegated” to you.&lt;/p&gt;
&lt;p&gt;They are a pain to work for.&lt;/p&gt;
&lt;p&gt;One of the qualities of a good manager is to tailor their delegation to the people they are delegating to.&lt;/p&gt;
&lt;p&gt;So they task Gillian, a senior engineer, with “writing some smoke tests to verify that the application works when deployed to the app server” and they are happy to let Gillian work within that scope because they trust that Gillian will come back to seek clarification if the description is lacking, or if there are issues down the road.&lt;/p&gt;</description></item><item><title>Jenkins' Maven job type considered evil</title><link>https://stephenc.github.io/post/2013-11-06-jenkins-maven-job-type-considered-evil/</link><pubDate>Wed, 06 Nov 2013 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2013-11-06-jenkins-maven-job-type-considered-evil/</guid><description>&lt;p&gt;There are two ways to build a Maven project with Jenkins*&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Use a free-style project with a Maven build step&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use a Maven-style project&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first way runs the build as Maven intended. The second way adds a whole lot of hooks and can even modify the build in ways that Maven did not intend.&lt;/p&gt;
&lt;p&gt;The first way requires that you configure stuff yourself. The second way tries to “guess” what you want and auto-configure it.&lt;/p&gt;</description></item><item><title>About test coverage</title><link>https://stephenc.github.io/post/2013-04-19-about-test-coverage/</link><pubDate>Fri, 19 Apr 2013 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2013-04-19-about-test-coverage/</guid><description>&lt;p&gt;I was given a link to yet another article preaching about how 100% code coverage is the only goal (the article is preaching, not Tatu BTW)&lt;/p&gt;
&lt;blockquote class="twitter-tweet"&gt;
 &lt;a href="https://twitter.com/cowtowncoder/status/325060869052575747"&gt;&lt;/a&gt;
&lt;/blockquote&gt;

&lt;script async src="https://platform.x.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;There is an issue I have with how the 100% coverage advocates present their argument, but we&amp;rsquo;ll get to that later.&lt;/p&gt;
&lt;p&gt;The case for 100% coverage is put quite simply:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Anything less than 100% coverage means that there are some lines in your code that are untested, and are you seriously willing to let code be released without being tested?&lt;/p&gt;</description></item><item><title>Note to self: Updated usejava BASH function for MacOSX</title><link>https://stephenc.github.io/post/2013-02-04-note-to-self-updated-usejava-bash-function-for-macosx/</link><pubDate>Mon, 04 Feb 2013 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2013-02-04-note-to-self-updated-usejava-bash-function-for-macosx/</guid><description>&lt;p&gt;For use when you have multiple JVM providers (Apple &amp;amp; Oracle), you want to be able to switch between JDKs for each CLI&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;usejava &lt;span style="color:#f92672"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; local sel&lt;span style="color:#f92672"&gt;=&lt;/span&gt;$1.jdk
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; -x &lt;span style="color:#e6db74"&gt;&amp;#34;/Library/Java/JavaVirtualMachines/jdk&lt;/span&gt;$sel&lt;span style="color:#e6db74"&gt;/Contents/Home/bin/java&amp;#34;&lt;/span&gt; -a ! -x &lt;span style="color:#e6db74"&gt;&amp;#34;/Library/Java/JavaVirtualMachines/&lt;/span&gt;$1&lt;span style="color:#e6db74"&gt;/Contents/Home/bin/java&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sel&lt;span style="color:#f92672"&gt;=&lt;/span&gt;jdk$sel
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; local base&lt;span style="color:#f92672"&gt;=&lt;/span&gt;/Library/Java/JavaVirtualMachines
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; -x &lt;span style="color:#e6db74"&gt;&amp;#34;/System/Library/Java/JavaVirtualMachines/&lt;/span&gt;$sel&lt;span style="color:#e6db74"&gt;/Contents/Home/bin/java&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; base&lt;span style="color:#f92672"&gt;=&lt;/span&gt;/System/Library/Java/JavaVirtualMachines
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; -z &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$1&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; -o ! -x &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$base&lt;span style="color:#e6db74"&gt;/&lt;/span&gt;$sel&lt;span style="color:#e6db74"&gt;/Contents/Home/bin/java&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; local prefix&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Syntax: usejava &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; i in /Library/Java/JavaVirtualMachines/* /System/Library/Java/JavaVirtualMachines/*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; -x &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$i&lt;span style="color:#e6db74"&gt;/Contents/Home/bin/java&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; /bin/echo -n &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$prefix&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;basename $i | sed -e &lt;span style="color:#e6db74"&gt;&amp;#34;s/^jdk//;s/\.jdk&lt;/span&gt;$&lt;span style="color:#e6db74"&gt;//;&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; prefix&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34; | &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; /bin/echo &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; -z &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$JAVA_HOME&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; export PATH&lt;span style="color:#f92672"&gt;=&lt;/span&gt;$base/$sel/Contents/Home/bin:$PATH
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; export PATH&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;echo $PATH|sed -e &lt;span style="color:#e6db74"&gt;&amp;#34;s:&lt;/span&gt;$JAVA_HOME&lt;span style="color:#e6db74"&gt;/bin:&lt;/span&gt;$base&lt;span style="color:#e6db74"&gt;/&lt;/span&gt;$sel&lt;span style="color:#e6db74"&gt;/Contents/Home/bin:g&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; export JAVA_HOME&lt;span style="color:#f92672"&gt;=&lt;/span&gt;$base/$sel/Contents/Home
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; echo -n -e &lt;span style="color:#e6db74"&gt;&amp;#34;\033]0;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;java -version 2&amp;gt;&amp;amp;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt; | sed -e &lt;span style="color:#e6db74"&gt;&amp;#34;s/.*\&amp;#34;\(.*\)\&amp;#34;.*/Java \1/;q&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;\007&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There is additional fun to be had, given that most Java based launchers that try to fix &lt;code&gt;JAVA_HOME&lt;/code&gt; when not set will guess the Apple JVM path… so the following Java program can help&lt;/p&gt;</description></item><item><title>iOS traing course</title><link>https://stephenc.github.io/post/2012-12-23-ios-training-course/</link><pubDate>Sun, 23 Dec 2012 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2012-12-23-ios-training-course/</guid><description>&lt;p&gt;&lt;a href="http://j.mp/TfdoxL"&gt;http://j.mp/TfdoxL&lt;/a&gt; a link to a free online iOS app development training course that looks worth checking out&lt;/p&gt;</description></item><item><title>Note to self: Mac Keyboard and ‘fancy’ characters</title><link>https://stephenc.github.io/post/2012-10-25-note-to-self-mac-keyboard-and-fancy-characters/</link><pubDate>Thu, 25 Oct 2012 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2012-10-25-note-to-self-mac-keyboard-and-fancy-characters/</guid><description>&lt;p&gt;Special Symbols and Characters on the regular Mac Keyboard&lt;/p&gt;
&lt;p&gt;These are for the British Keyboard layout&lt;/p&gt;
&lt;p&gt;Currency Symbols&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Symbol&lt;/th&gt;
 &lt;th&gt;Key combination&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;$ dollar&lt;/td&gt;
 &lt;td&gt;Shift+4&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;¢ cents&lt;/td&gt;
 &lt;td&gt;Option+4&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;£ pound&lt;/td&gt;
 &lt;td&gt;Shift+3&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;¥ yen&lt;/td&gt;
 &lt;td&gt;Option+y&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;€ euro&lt;/td&gt;
 &lt;td&gt;Option+2&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Trademark and Copyright Symbols&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Symbol&lt;/th&gt;
 &lt;th&gt;Key combination&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;© copyright&lt;/td&gt;
 &lt;td&gt;Option+g&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;® registered&lt;/td&gt;
 &lt;td&gt;Option+r&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;™ trademark&lt;/td&gt;
 &lt;td&gt;Option+Shift+2&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Apple Symbol&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Symbol&lt;/th&gt;
 &lt;th&gt;Key combination&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt; apple&lt;/td&gt;
 &lt;td&gt;Option+Shift+K&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Math and Greek Character Symbols&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Symbol&lt;/th&gt;
 &lt;th&gt;Key combination&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;± plus-or-minus&lt;/td&gt;
 &lt;td&gt;Option+Shift+Equals&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;µ micro&lt;/td&gt;
 &lt;td&gt;Option+h&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;π pi&lt;/td&gt;
 &lt;td&gt;Option+l (as in L is for llama)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;√ square root&lt;/td&gt;
 &lt;td&gt;Option+t&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;÷ divided by&lt;/td&gt;
 &lt;td&gt;Option+/ (slash is key to the left of right-hand shift key)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;· middle dot&lt;/td&gt;
 &lt;td&gt;Option+Shift+9&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;≈ almost equal&lt;/td&gt;
 &lt;td&gt;Option+x&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;≠ not equal&lt;/td&gt;
 &lt;td&gt;Option+=&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;∞ infinity&lt;/td&gt;
 &lt;td&gt;Option+Shift+T&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;≤ less than or equal&lt;/td&gt;
 &lt;td&gt;Option+, (comma)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;≥ greater than or equal&lt;/td&gt;
 &lt;td&gt;Option+. (period)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Å Angstrom sign&lt;/td&gt;
 &lt;td&gt;Option+Shift+K, Shift+A&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;∑ summation sign&lt;/td&gt;
 &lt;td&gt;Option+Shift+F&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;° degree sign&lt;/td&gt;
 &lt;td&gt;Option+Shift+0 (zero)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;∂ partial differential&lt;/td&gt;
 &lt;td&gt;Option+d&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;∫ integral&lt;/td&gt;
 &lt;td&gt;Option+Shift+D&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Ω Omega&lt;/td&gt;
 &lt;td&gt;Option+Shift+Z&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Copyediting, typesetting, and miscellaneous symbols&lt;/p&gt;</description></item><item><title>The Cross-Build Injection Attack Fallacy</title><link>https://stephenc.github.io/post/2012-10-09-the-cross-build-injection-attack-fallacy/</link><pubDate>Tue, 09 Oct 2012 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2012-10-09-the-cross-build-injection-attack-fallacy/</guid><description>&lt;p&gt;This is a repost of &lt;a href="http://developer-blog.cloudbees.com/2012/10/the-cross-build-injection-attack-fallacy.html"&gt;my post on the CloudBees Developers blog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;TL;DR Source control injection attacks are a bigger worry than build tool injection attacks, and if you cannot trust your local filesystem, then you cannot trust anything.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;A few exchanges on twitter have prompted me to write a fuller blog post on the subject of Cross-Build Injection (XBI) Attacks.&lt;/p&gt;
&lt;p&gt;The idea of XBI is that you trick the developer and replace parts of their code with your code, thereby getting your code to be trusted by the developer.&lt;/p&gt;</description></item><item><title>Do you want to become a Maven Committer?</title><link>https://stephenc.github.io/post/2012-07-11-do-you-want-to-become-a-maven-committer/</link><pubDate>Wed, 11 Jul 2012 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2012-07-11-do-you-want-to-become-a-maven-committer/</guid><description>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Hamlet:&lt;/em&gt; &amp;hellip; for there is nothing either good or bad, but thinking makes it so.&lt;/p&gt;
&lt;p&gt;&amp;mdash; Hamlet Act 2, scene 2, 239–251, William Shakespeare&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The &lt;a href="http://www.apache.org/"&gt;Apache Software Foundation&lt;/a&gt; is a meritocracy. By this we mean that you gain status based on the merit of your work and actions. In fact the status that you gain is a recognition of the merit of your work and actions.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://maven.apache.org/"&gt;Maven&lt;/a&gt; is an Apache project, that means that we have to follow the Apache rules and way. One of those rules is that we cannot hand out commit access to anyone who asks for it.&lt;/p&gt;</description></item><item><title>Note to self: Java Generics - The Get and Put principle</title><link>https://stephenc.github.io/post/2011-10-24-note-to-self-java-generics-the-get-and-put-principle/</link><pubDate>Mon, 24 Oct 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-10-24-note-to-self-java-generics-the-get-and-put-principle/</guid><description>&lt;p&gt;With Java Generics, it can be useful to insert wildcards wherever possible, but how do you decide &lt;em&gt;which&lt;/em&gt; wildcard is correct? When do you use &lt;code&gt;? super T&lt;/code&gt;, &lt;code&gt;? extends T&lt;/code&gt; and when should you not use a wildcard at all.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;The Get and Put principle:&lt;/strong&gt; Use an &lt;code&gt;extends&lt;/code&gt; wildcard when you only &lt;em&gt;get&lt;/em&gt; values from the structure. Use a &lt;code&gt;super&lt;/code&gt; wildcard when you only &lt;em&gt;put&lt;/em&gt; values into the structure. Don&amp;rsquo;t use a wildcard when you both &lt;em&gt;get&lt;/em&gt; and &lt;em&gt;put&lt;/em&gt; values from/into the structure.&lt;/p&gt;</description></item><item><title>How to add Mac-like shadow to your screenshots</title><link>https://stephenc.github.io/post/2011-10-19-how-to-add-mac-like-shadow-to-your-screenshots/</link><pubDate>Wed, 19 Oct 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-10-19-how-to-add-mac-like-shadow-to-your-screenshots/</guid><description>&lt;p&gt;Cmd+Shift+4 followed by Space is a lovely way to get a screen shot of a window on an Apple Mac&amp;hellip;&lt;/p&gt;
&lt;p&gt;In fact here is one such screenshot:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://stephenc.github.io/images/post/2011-10-19-screenshot.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;Notice the nice shadow effect around the screenshot? Ever wanted to add that shadow effect to your non-mac screenshots?&lt;/p&gt;
&lt;p&gt;ImageMagick is your friend&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;convert NoShadowScreenshot.png &lt;span style="color:#ae81ff"&gt;\(&lt;/span&gt; +clone -background black -shadow 80x20+0+15 &lt;span style="color:#ae81ff"&gt;\)&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; +swap -background transparent -layers merge +repage WithShadowScreenshot.png
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There you are, nice equivalent shadow added.&lt;/p&gt;</description></item><item><title>Java Serialization and locks</title><link>https://stephenc.github.io/post/2011-08-15-java-serialization-and-locks/</link><pubDate>Mon, 15 Aug 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-08-15-java-serialization-and-locks/</guid><description>&lt;p&gt;Java has a couple of “nice” features, specifically:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Built-in locks&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Baked in support for object serialization&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now I don&amp;rsquo;t want to get into a war about how both of these are flawed (there was a reason that I put “nice” in quotes) but here is a quick note on how to make the two play nice (more as a reference to myself&amp;hellip; but if others find this useful, well and good).&lt;/p&gt;</description></item><item><title>Book review: “EJB 3.1 Cookbook” by Richard M. Reese</title><link>https://stephenc.github.io/post/2011-08-11-ejb3.1-cookbook-review/</link><pubDate>Thu, 11 Aug 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-08-11-ejb3.1-cookbook-review/</guid><description>&lt;h1 id="book-review-ejb-31-cookbook-by-richard-m-reese"&gt;Book review: “EJB 3.1 Cookbook” by Richard M. Reese&lt;/h1&gt;
&lt;p&gt;&lt;img src="https://stephenc.github.io/images/post/2011-08-11-EJB31Cookbook.png" alt=""&gt;&lt;/p&gt;
&lt;h2 id="review"&gt;Review&lt;/h2&gt;
&lt;p&gt;The kind people at Packt gave me a copy of “EJB 3.1 Cookbook” by Richard M. Reese to review. This book should be viewed as a collection of building block recipes, not as a collection of meal plans, and not as a how to cook book that you would read from cover to cover. When I look at the book from this point of view, I think that it is well structured and put together and the content is pitched just about right. This book does not tell you when to use a specific recipe, so it would be a mistake to think that this is the only book you would need for EJB 3.1. However, when you need a “Béchamel sauce”, this is a book that you can go to, quickly find and open up the right section and read the recipe to refresh your mind and get cooking.&lt;/p&gt;</description></item><item><title>Open Source: the Meritocracy vs the Circle of Trust</title><link>https://stephenc.github.io/post/2011-08-04-open-source-the-meritocracy-vs-the-circle-of-trust/</link><pubDate>Thu, 04 Aug 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-08-04-open-source-the-meritocracy-vs-the-circle-of-trust/</guid><description>&lt;p&gt;There has been this idea running around the back of my head for a while, and it&amp;rsquo;s only now that it is starting to crystalize into something that I can express.&lt;/p&gt;
&lt;p&gt;When we look at Open Source projects, we see that there is a hierarchy of involvement. There are different levels at which you can be involved, and at each higher level, there will be less and less individuals. For now I am going to divide involvement up like this:&lt;/p&gt;</description></item><item><title>Backwards compatibility</title><link>https://stephenc.github.io/post/2011-05-01-backwards-compatibility/</link><pubDate>Sun, 01 May 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-05-01-backwards-compatibility/</guid><description>&lt;p&gt;This is a tail about Jenkins (née Hudson) and Kohsuke&amp;rsquo;s policy of maintaining backwards compatibility&amp;hellip;&lt;/p&gt;
&lt;p&gt;Back in 2006 I started working for my previous employer, just a month or two after Peter Reilly started. Initially we were working on the same team. This was a team who&amp;rsquo;s CI system was a nightly cron job that emailed off a list of failing tests to everyone&amp;hellip; obviously Peter and I had many a WTF over that old system&amp;hellip; so I convinced our boss that we should put some effort into setting up a proper CI system&amp;hellip; Initially this was CruiseControl (as he thought Hudson at version 1.64 was too new and unheard of&amp;hellip; go with the old reliable)&amp;hellip; but after a couple of pains with the CruiseControl system (monolithic xml config file), we convinced him to switch to Hudson&amp;hellip; (I don&amp;rsquo;t think we ever looked back!)&lt;/p&gt;</description></item><item><title>Continuously deploy your java apps to the cloud</title><link>https://stephenc.github.io/post/2011-05-01-continuously-deploy-your-java-apps-to-the-cloud/</link><pubDate>Sun, 01 May 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-05-01-continuously-deploy-your-java-apps-to-the-cloud/</guid><description>&lt;p&gt;In my previous post showed how easy it is to run your java application on CloudBees&amp;rsquo; RUN@cloud service. Today I&amp;rsquo;m going to use the CloudBees Deployer plugin for Jenkins that allows you to deploy your app to the cloud from your CI server. I am using the DEV@cloud Jenkins service for my CI infrastructure, but you can use this plugin from your own Jenkins (or Nectar) server.&lt;/p&gt;
&lt;p&gt;So first step is to install the CloudBees Deployer plugin&amp;hellip;&lt;/p&gt;</description></item><item><title>Deploy your java apps to the cloud</title><link>https://stephenc.github.io/post/2011-05-01-deploy-your-java-apps-to-the-cloud/</link><pubDate>Sun, 01 May 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-05-01-deploy-your-java-apps-to-the-cloud/</guid><description>&lt;p&gt;I work for CloudBees Inc., they are a great company with great products. I have mostly been working on the DEV@ side of the fence which is focused on continuous integration and basically the development side of your application, but we also have the RUN@ side of the fence where we provide a platform as a service (PaaS) for running your java web applications on the cloud. I could give you the sales pitch, but I&amp;rsquo;ll leave it at: the technologies and people behind RUN@ were one of the key reasons why I decided to join CloudBees.&lt;/p&gt;</description></item><item><title>The worst Unit Tests I ever saw</title><link>https://stephenc.github.io/post/2011-05-01-the-worst-unit-tests-i-ever-saw/</link><pubDate>Sun, 01 May 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-05-01-the-worst-unit-tests-i-ever-saw/</guid><description>&lt;p&gt;In relation to http://dhanji.github.com/#unit-tests-false-idol here is the tail of the worst test case I ever came across&amp;hellip;&lt;/p&gt;
&lt;p&gt;In a former employers, there was an employee who we will call Kevin McCallister in order to protect the guilty. In any case, for various reasons, I ended up having to maintain some of the code that Kevin wrote&amp;hellip;&lt;/p&gt;
&lt;p&gt;I ran all the test cases and measured the code coverage, it seemed high and there were lots of test cases&amp;hellip; but bugs a plenty kept on hitting me&amp;hellip; I finally found the answer in one test class&amp;hellip; which looked a little something like this:&lt;/p&gt;</description></item><item><title>Quick and very Dirty Mavenizer</title><link>https://stephenc.github.io/post/2011-04-01-quick-and-very-dirty-mavenizer/</link><pubDate>Fri, 01 Apr 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-04-01-quick-and-very-dirty-mavenizer/</guid><description>&lt;p&gt;The following quick and dirty bash script will take a pom and a jar and fake a maven build based on the source files for that that can be found in the current directory.&lt;/p&gt;
&lt;p&gt;Really useful when running mvn dependency:analyze on a project you are validating POMs for.&lt;/p&gt;
&lt;p&gt;#!/bin/bash&lt;/p&gt;
&lt;p&gt;if [ &amp;ldquo;A$3&amp;rdquo; == &amp;ldquo;A&amp;rdquo; ]&lt;/p&gt;
&lt;p&gt;then&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;Syntax: $0 pomfile jarfile dir&amp;rdquo;&lt;/p&gt;
&lt;p&gt;return&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;rm -rvf &amp;ldquo;$3/src&amp;rdquo;&lt;/p&gt;
&lt;p&gt;mkdir -p &amp;ldquo;$3/src/main/java&amp;rdquo;&lt;/p&gt;
&lt;p&gt;cp -f &amp;ldquo;$1&amp;rdquo; &amp;ldquo;$3/pom.xml&amp;rdquo;&lt;/p&gt;</description></item><item><title>Handy bash script to fix a pom's SCM section to the current Subversion location</title><link>https://stephenc.github.io/post/2011-03-01-handy-bash-script-to-fix-a-poms-scm-section-to-the-current-subversion-location/</link><pubDate>Tue, 01 Mar 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-03-01-handy-bash-script-to-fix-a-poms-scm-section-to-the-current-subversion-location/</guid><description>&lt;p&gt;#!/bin/bash&lt;/p&gt;
&lt;p&gt;URL=&amp;quot;$(svn info | sed -n -e &amp;lsquo;/^URL:/{s/URL: *//p}&amp;rsquo;)&amp;quot;&lt;/p&gt;
&lt;p&gt;ROOT=&amp;quot;$(svn info | sed -n -e &amp;ldquo;/^Repository Root:/{s/Repository Root: *//p}&amp;rdquo;)&amp;quot;&lt;/p&gt;
&lt;p&gt;NEW_PATH=&amp;quot;${URL#$ROOT}&amp;quot;&lt;/p&gt;
&lt;p&gt;OLD_URL=&amp;quot;$(sed -n &amp;lsquo;/&amp;lt; *scm *&amp;gt;/,/&amp;lt; */scm *&amp;gt;/p&amp;rsquo; pom.xml | sed -n &amp;lsquo;/&amp;lt; *connection *&amp;gt;/,/&amp;lt; */ *connection *&amp;gt;/{s/.*connection &lt;em&gt;&amp;gt; &lt;em&gt;scm:svn:([^ &amp;lt;]&lt;/em&gt;)[ &amp;lt;].&lt;/em&gt;/\1/p}&amp;rsquo;)&amp;quot;&lt;/p&gt;
&lt;p&gt;OLD_PATH=&amp;quot;${OLD_URL#$ROOT}&amp;quot;&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;OLD URL: $OLD_URL&amp;rdquo;&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;NEW URL: $URL&amp;rdquo;&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;ROOT: $ROOT&amp;rdquo;&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;OLD PATH: $OLD_PATH&amp;rdquo;&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;NEW PATH: $NEW_PATH&amp;rdquo;&lt;/p&gt;
&lt;p&gt;sed -i &amp;lsquo;/&amp;lt; *scm *&amp;gt;/,/&amp;lt; */scm *&amp;gt;/{s/&amp;rsquo;${OLD_PATH////\/}&amp;rsquo;/&amp;rsquo;${NEW_PATH////\/}&amp;rsquo;/}&amp;rsquo; pom.xml&lt;/p&gt;</description></item><item><title>My magic Maven and ANT version selection bash functions (for the Mac)</title><link>https://stephenc.github.io/post/2011-03-01-my-magic-maven-and-ant-version-selection-bash-functions-for-the-mac/</link><pubDate>Tue, 01 Mar 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-03-01-my-magic-maven-and-ant-version-selection-bash-functions-for-the-mac/</guid><description>&lt;p&gt;OK, so a while back I posted my bash script for selecting the maven version to use for the current session &lt;a href="http://s.apache.org/FQ2"&gt;http://s.apache.org/FQ2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Now that I have a Mac for my full time development machine, I thought I would share my version of these functions for Mac users:&lt;/p&gt;
&lt;p&gt;usemvn ()&lt;/p&gt;
&lt;p&gt;{&lt;/p&gt;
&lt;p&gt;if [ -z &amp;ldquo;$1&amp;rdquo; -o ! -x &amp;ldquo;/usr/share/java/maven-$1/bin/mvn&amp;rdquo; ]&lt;/p&gt;
&lt;p&gt;then&lt;/p&gt;
&lt;p&gt;local prefix=&amp;ldquo;Syntax: usemvn &amp;quot;&lt;/p&gt;
&lt;p&gt;for i in /usr/share/java/maven-*&lt;/p&gt;
&lt;p&gt;do&lt;/p&gt;
&lt;p&gt;if [ -x &amp;ldquo;$i/bin/mvn&amp;rdquo; ]; then&lt;/p&gt;</description></item><item><title>A handy string for when testing i18n</title><link>https://stephenc.github.io/post/2011-02-01-a-handy-string-for-when-testing-i18n/</link><pubDate>Tue, 01 Feb 2011 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2011-02-01-a-handy-string-for-when-testing-i18n/</guid><description>&lt;p&gt;Here&amp;rsquo;s a handy string for i18n testing:&lt;/p&gt;
&lt;p&gt;用户汉语&lt;/p&gt;
&lt;p&gt;It can be handy to have a string in a non-english charater set that can be pushed end-to-end.&lt;/p&gt;
&lt;p&gt;This should be a sad sad joke similar to the writing on the bottom of a leprechaun I saw in a gift shop in Ennis:&lt;/p&gt;
&lt;p&gt;Déanta i dtír eile&lt;/p&gt;
&lt;p&gt;I should point out that it was probably&lt;/p&gt;
&lt;p&gt;Déanta sa tSín&lt;/p&gt;
&lt;p&gt;Still&lt;/p&gt;
&lt;p&gt;Mura féidir leat tuiscint a fháil ar an ansin is féidir leat léamh na Gaeilge.&lt;/p&gt;</description></item><item><title>The Clean Coder: QA or When do you flip a pancake?</title><link>https://stephenc.github.io/post/2010-08-01-the-clean-coder-qa-or-when-do-you-flip-a-pancake/</link><pubDate>Sun, 01 Aug 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-08-01-the-clean-coder-qa-or-when-do-you-flip-a-pancake/</guid><description>&lt;p&gt;An interesting blog on QA and development: The Clean Coder: QA or When do you flip a pancake?&lt;/p&gt;</description></item><item><title>3D TV, level headed people will say it looks fine, looks bad lying down</title><link>https://stephenc.github.io/post/2010-07-01-3d-tv-level-headed-people-will-say-it-looks-fine-looks-bad-lying-down/</link><pubDate>Thu, 01 Jul 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-07-01-3d-tv-level-headed-people-will-say-it-looks-fine-looks-bad-lying-down/</guid><description>&lt;p&gt;I had my first oportunity to see the new 3D TV&amp;rsquo;s this weekend.  They looked OK to me.  There was a 3D effect.  All around me were people who were going &amp;ldquo;wow! this is great! this is absolutely fantastic!&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;But then I tilted my head, and low and behold, because the system uses horizontal separation to deliver 3D, it requires that your eyes be horizontally separated in order to deliver the 3D effect&amp;hellip; when your eyes are vertical, however, it looks just as shit as when you have not got the glasses on.&lt;/p&gt;</description></item><item><title>Keeping Hudson configuration and data in SVN</title><link>https://stephenc.github.io/post/2010-07-01-keeping-hudson-configuration-and-data-in-svn/</link><pubDate>Thu, 01 Jul 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-07-01-keeping-hudson-configuration-and-data-in-svn/</guid><description>&lt;p&gt;We recently lost our hudson server due to a multiple disk failure in the RAID array storing our hudson configuration. [5 of the 15 disks died]&lt;/p&gt;
&lt;p&gt;So I&amp;rsquo;ve been looking into a backup script that will allow us to keep a backup of the configuration.  We use Maven for most of our builds, so the released artifacts are in our Maven Repository (which is hosted on two servers each with RAID arrays and using DRBD to mirror between the pair, with an rsync to a NAS in another cabinet and we are trying to get an rsych to an off-site storage going as well).&lt;/p&gt;</description></item><item><title>Quick and dirty remove -SNAPSHOTS from your local maven repository</title><link>https://stephenc.github.io/post/2010-07-01-quick-and-dirty-remove-snapshots-from-your-local-maven-repository/</link><pubDate>Thu, 01 Jul 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-07-01-quick-and-dirty-remove-snapshots-from-your-local-maven-repository/</guid><description>&lt;p&gt;Works on *nixfind ~/.m2/repository -type d -name *-SNAPSHOT -exec rm -rvf {} ;By searching for the directories we should catch the -YYYYMMDD.HHMMSS format of snapshots also&lt;/p&gt;</description></item><item><title>Easy parallelization with Bash in Linux</title><link>https://stephenc.github.io/post/2010-05-01-easy-parallelization-with-bash-in-linux/</link><pubDate>Sat, 01 May 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-05-01-easy-parallelization-with-bash-in-linux/</guid><description>&lt;p&gt;Cool post I just found:http://coldattic.info/shvedsky/pro/blogs/a-foo-walks-into-a-bar/posts/7&lt;/p&gt;</description></item><item><title>Don't Do What Donny Don't Does #1 - Seam @Synchronized and synchronized methods</title><link>https://stephenc.github.io/post/2010-03-01-dont-do-what-donny-dont-does-1-seam-synchronized-and-synchronized-methods/</link><pubDate>Mon, 01 Mar 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-03-01-dont-do-what-donny-dont-does-1-seam-synchronized-and-synchronized-methods/</guid><description>&lt;p&gt;I am starting a series of things you should not do:&lt;/p&gt;
&lt;p&gt;Seam has this handy annotation: @Synchronized which ensures that only a single thread may access the methods/fields of the component at the same time.&lt;/p&gt;
&lt;p&gt;Often times it is easy to forget that SESSION scoped Seam components are automatically @Synchronized&lt;/p&gt;
&lt;p&gt;Java has this (formerly) handy modifier synchronized which when applied to a method, ensures that the object&amp;rsquo;s implicit lock is held whenever the method is invoked.&lt;/p&gt;</description></item><item><title>OpenEjb, Jetty and Maven - Transaction Management</title><link>https://stephenc.github.io/post/2010-03-01-openejb-jetty-and-maven-transaction-management/</link><pubDate>Mon, 01 Mar 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-03-01-openejb-jetty-and-maven-transaction-management/</guid><description>&lt;p&gt;I&amp;rsquo;ve been meaning to blog about getting transaction management working with OpenEjb and Jetty using jetty:run&amp;hellip; it&amp;rsquo;s still an on-going story&amp;hellip; but the following might get you going&amp;hellip;First off, in your pom.xml you need to add the configuration for maven-jetty-plugin&amp;hellip; we need to dance around the various activemq/activeio versions and ensure that we get the correct version of ant&amp;hellip; &amp;lt;project xmlns=&amp;ldquo;&lt;a href="http://maven.apache.org/POM/4.0.0%22"&gt;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/a&gt; xmlns:xsi=&amp;ldquo;&lt;a href="http://www.w3.org/2001/XMLSchema-instance%22"&gt;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/a&gt;          xsi:schemaLocation=&amp;ldquo;&lt;a href="http://maven.apache.org/POM/4.0.0"&gt;http://maven.apache.org/POM/4.0.0&lt;/a&gt; &lt;a href="http://maven.apache.org/maven-v4_0_0.xsd%22%3E"&gt;http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&amp;gt;&lt;/a&gt;     &lt;!-- raw HTML omitted --&gt;4.0.0&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;org.apache.openejb.examples&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;jetty-openejb&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;war&lt;!-- raw HTML omitted --&gt;     &lt;!-- raw HTML omitted --&gt;1.0-SNAPSHOT&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;jetty-openejb Maven Webapp&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;&lt;a href="http://maven.apache.org"&gt;http://maven.apache.org&lt;/a&gt;&lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;         &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;3.8.1&lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;test&lt;!-- raw HTML omitted --&gt;         &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;${project.artifactId}&lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;org.mortbay.jetty&lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;maven-jetty-plugin&lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;6.1.22&lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;activemq-core&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;4.1.1&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging-api&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;activemq-ra&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;4.1.1&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging-api&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;3.1.2&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                             &lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;commons-logging&lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;commons-logging-api&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.apache.openejb&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;openejb-core&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;3.1.2&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;activemq-core&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;activemq-ra&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;org.apache.activemq&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;activeio-core&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                                        &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;org.mortbay.jetty&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;jsp-2.1-jetty&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;6.1.22&lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                                &lt;!-- raw HTML omitted --&gt;ant&lt;!-- raw HTML omitted --&gt;                                 &lt;!-- raw HTML omitted --&gt;ant&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;                        &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;${basedir}/src/main/jetty/jetty.xml&lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;     &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Next we need to configure a src/main/jetty/jetty.xml to bind the UserTransaction instance into jetty&amp;hellip; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;java.naming.factory.initial&lt;!-- raw HTML omitted --&gt;                    &lt;!-- raw HTML omitted --&gt;org.apache.openejb.client.LocalInitialContextFactory&lt;!-- raw HTML omitted --&gt;                 &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;openejb:TransactionManager&lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;     &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;                     &lt;!-- raw HTML omitted --&gt;                &lt;!-- raw HTML omitted --&gt;            &lt;!-- raw HTML omitted --&gt;        &lt;!-- raw HTML omitted --&gt;    &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;And presto-chango, now jetty has a transaction manager provided by openejb.  (Note: if we don&amp;rsquo;t mind storing that in a jetty-env in /WEB-INF, you can put the same config in WEB-INF/jetty-env.xml) OK, so here are the issues:Reloading does not work (because org.apache.openejb.core.ivm.naming.IvmContext does not support the destroySubcontext(Context) methodWe are using jetty&amp;rsquo;s JNDI provider in the web-app and openejb&amp;rsquo;s JNDI provider for the EJBs&amp;hellip; this is because When jetty binds names to JNDI (using org.mortbay.jetty.plus.naming.Resource or org.mortbay.jetty.plus.naming.Transaction) it binds the object to JNDIName and it also binds a NamingEnrtry for the object to __/JNDIName Unfortunately, openejb&amp;rsquo;s JNDI implementation seems to be somewhat strange in this regard&amp;hellip; if we add the SystemProperties to jetty to have it use openejb&amp;rsquo;s JNDI implementation, e.g. add the following to /project/build/plugins/plugin[maven-jetty-plugin]/configuration/systemProperties                         &lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;java.naming.factory.initial&lt;!-- raw HTML omitted --&gt;                            &lt;!-- raw HTML omitted --&gt;org.apache.openejb.client.LocalInitialContextFactory&lt;!-- raw HTML omitted --&gt;                         &lt;!-- raw HTML omitted --&gt;Then when we bind &lt;strong&gt;/UserTransaction it gets bound to openejb:&lt;/strong&gt;/UserTransaction but when we lookup &lt;strong&gt;/UserTransaction openejb looks up openejb:local/&lt;/strong&gt;/UserTransaction And that is just for starters&amp;hellip; there seems to be a whole host of other JNDI strangeness between jetty&amp;rsquo;s side and openejb&amp;rsquo;s sideThe side effect of all this is that if you want resource refs to work correctly, you need to fish them out of openejb&amp;rsquo;s JNDI context and push them into jetty&amp;rsquo;s JNDI context In any case this is at least a start!&lt;/p&gt;</description></item><item><title>Review Board and Subversion Hooks</title><link>https://stephenc.github.io/post/2010-02-01-review-board-and-subversion-hooks/</link><pubDate>Mon, 01 Feb 2010 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2010-02-01-review-board-and-subversion-hooks/</guid><description>&lt;p&gt;Review Board is quite nice&amp;hellip; it has a handy program for posting reviews (postreview)&amp;hellip; and you can integrate this into your subversion hook scripts quite nicely&amp;hellip;&lt;/p&gt;
&lt;p&gt;But what if you want to automate submitting reviews on only parts of your code base&amp;hellip;&lt;/p&gt;
&lt;p&gt;What I want is to be able to set a property on a folder and then any time a file is changed in that folder or it&amp;rsquo;s children, then a review will automatically be scheduled&amp;hellip;&lt;/p&gt;</description></item><item><title>Apache 2.2 Authentication with Active Directory via Cyrus SASL</title><link>https://stephenc.github.io/post/2008-11-01-apache-22-authentication-with-active-directory-via-cyrus-sasl/</link><pubDate>Sat, 01 Nov 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-11-01-apache-22-authentication-with-active-directory-via-cyrus-sasl/</guid><description>&lt;p&gt;Here is my version of the holy grail, i.e.Authentication for Apache HTTPD against Active Directory.This is not the only way to skin this cat, for example you could also use Sander Marechal&amp;rsquo;s technique (which uses mod_authnz_ldap). However, my problem with Sander&amp;rsquo;s technique is that you need to have an account in Active Directory which you will use to bind to the LDAP server. That means that the accound password has to be stored in a plain-text file on the Apache server, and if the password expires everything breaks until you go fix the password.I want as near to zero maintenance as possible, running on CentOS 5.2 with minimal custom work - so that I don&amp;rsquo;t have to maintain it when it does break.I have previously configured Kerberos to authenicate against Active Directory, so my first attempt was with mod_auth_kerb. That worked&amp;hellip; but very slowly&amp;hellip; trying to an empty access Subversion repository took over 2 minutes. The problem being that successful authentication was not being cached.Then I tried using mod_perl and the Authen::Simple::ActiveDirectory reasoning that I could always hack caching once in perl&amp;hellip; but getting that lot installed on a CentOS 5.2 from RPMs was an exercise in tears.So, anyway, I found out that Cyrus SASL supports two modes of LDAP authentication:The bind method uses the LDAP bind facility to verify the password. The bind method is not available when ldap_use_sasl is turned on. In that case saslauthd will use fastbind.&amp;lsquo;bind&amp;rsquo; is the default auth method. When ldap_use_sasl is enabled, &amp;lsquo;fastbind&amp;rsquo; is the default.The custom method uses userPassword attribute to verify the password. Suppored hashes: crypt, md5, smd5, sha and ssha. Cleartext is supported as well.The fastbind method (when &amp;rsquo;ldap_use_sasl: no&amp;rsquo;) does away with the search and an extra anonymous bind in auth_bind, but makes two assumptions: 1. Expanding the ldap_filter expression gives the user&amp;rsquo;s fully-qualified DN 2. There is no cost to staying bound as a named userSo bind is pretty much the same technique as that used by mod_authnz_ldap, and (as ActiveDirectory does not support - at my company at least - anonymous bind) is ruled out of the running.&amp;ldquo;fastbind&amp;rdquo; sounds exactly like what I want&amp;hellip; ok and saslauthd can be configured to cache authentication, so none of the performance hit of mod_auth_kerb. All we need is a way to tie this into Apache.So, enter mod_authn_sasl which does just that.First, we need to create an RPM, so I did a quicksudo yum install httpd-devel rpmbuild mocksudoecho &amp;ldquo;%_topdir %(echo $HOME)/rpmbuild&amp;rdquo; &amp;gt; ~/.rpmmacrosmkdir -p ~/rpmbuild/{BUILD,RPMS,SOURCES,SPECS,SRPMS}I added my account to the mock group, logged out and in again for the group membership to be recognised and I was ready to go. This was my first experience playing with mock, but it was lovely, especially as CentOS has its own version.I pre-primed my mock environments for i386 and x86_64 as I need RPMs for both of these:mock -r centos-5-i386 initmock -r centos-5-x86_64 initThen I downloaded mod_authn_sasl-1.0.2.tar.bz2 and started writing my spec file.You can download the RPC spec: mod_authn_sasl.spec and the apache config file: mod_authn_sasl.conf.I put mod_authn_sasl-1.0.2.tar.bz2 and mod_authn_sasl.conf in the ~/rpmbuild/SOURCES and then runningrpmbuild -ba mod_authn_sasl.specproduced my source RPM, then I used mock to create the two binary RPMs that I needed:mock -r centos-5-i386 ~/rpmbuild/SRPMS/mod_authn_sasl-1.0.2-4.src.rpmmock -r centos-5-x86_64 ~/rpmbuild/SRPMS/mod_authn_sasl-1.0.2-4.src.rpmThe rpms built from the mock environments end up in /var/lib/mock/centos-5-i386/result and /var/lib/mock/centos-5-x86_64/result. If you want to be lazy and trust my binaries here they are:mod_authn_sasl-1.0.2-4.i386.rpmmod_authn_sasl-1.0.2-4.x86_64.rpmNow all we need to do is configure everything.I&amp;rsquo;ve written this shell script to simplify configuring saslauthd for most good deployments of Active Directory, i.e. where there are SRV records for the domain in your DNS server. You need to run it as root. It looks up the SRV records for the domain name you provide, and creates /etc/saslauthd.conf from them, assuming that the Active Directory domain name is the first word of your DNS name converted to uppercase. So for example, if your Active Directory is set up correctly, and you can login to windows as either EXAMPLE\joebloggs or &lt;a href="mailto:jbloggs@example.foo.com"&gt;jbloggs@example.foo.com&lt;/a&gt; then you would runsh system-saslauthd-active-directory-config.sh example.foo.comAnd that should setup saslauthd for you. You can test this using the testsaslauthd program.Then all you need to do is secure the appropriate locations in apache, e.g. by adding the following to your VirtualHost configuration:&amp;lt;Location /private&amp;gt;AuthSaslPwcheckMethod saslauthdAuthSaslAppname httpdAuthSaslRealm exampleAuthType basicAuthBasicProvider saslAuthBasicAuthoritative OnAuthName &amp;ldquo;&lt;a href="mailto:sasl@example.com"&gt;sasl@example.com&lt;/a&gt;&amp;quot;require valid-user&lt;!-- raw HTML omitted --&gt;And define the SASL application provider for the AuthSaslAppname you specified, e.g. for the above configuration you need to create /usr/lib/sasl2/httpd.conf with the contents:pwcheck_method:saslauthdThat&amp;rsquo;s it. You should be done.Updated Friday 28th November 2008: I noticed that the spec file I had provided did not have the correct Requires and BuildRequires. I have fixed this and now I have posted updated rpms (these are 1.0.2-4) with the correct requires to help with a minimal install&lt;/p&gt;</description></item><item><title>HowTo: CentOS 5, Apache 2.2, Subversion 1.5 with ActiveDirectory Authentication</title><link>https://stephenc.github.io/post/2008-11-01-howto-centos-5-apache-22-subversion-15-with-activedirectory-authentication/</link><pubDate>Sat, 01 Nov 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-11-01-howto-centos-5-apache-22-subversion-15-with-activedirectory-authentication/</guid><description>&lt;p&gt;Here&amp;rsquo;s my step by step:Install CentOS 5.2Configure Network and Proxies as neededI usually create a login script: /etc/profile.d/login.sh as follows:function set_proxies() { local s PROXY_ADDR=&amp;ldquo;&lt;a href="http://proxy.example.com:8000/%22"&gt;http://proxy.example.com:8000/&amp;quot;&lt;/a&gt; for s in HTTP HTTPS FTP GOPHER NEWSPOST NEWSREPLY\ NEWS NNTP SNEWSPOST SNEWSREPLY SNEWS\ WAIS FINGER CSO; do export ${s}_PROXY=${PROXY_ADDR} done for s in http https ftp; do export ${s}_proxy=${PROXY_ADDR} done}set_proxiesI installed from the DVD, so yum update to ensure everything is up-to-date.Get my mod_authn_sasl rpm:wget &lt;a href="http://www.one-dash.com/blog/mod_authn_sasl-1.0.2-3.i386.rpmInstall"&gt;http://www.one-dash.com/blog/mod_authn_sasl-1.0.2-3.i386.rpmInstall&lt;/a&gt; it (this should pull down the):yum &amp;ndash;nogpgcheck localinstall mod_authn_sasl-1.0.2-3.i386.rpmGet my sasl-magic-config script:wget &lt;a href="http://www.one-dash.com/blog/system-saslauthd-active-directory-config.shdos2unix"&gt;http://www.one-dash.com/blog/system-saslauthd-active-directory-config.shdos2unix&lt;/a&gt; system-saslauthd-active-directory-config.shRun the script:sh system-saslauthd-active-directory-config.sh example.comChange the security level:system-config-securitylevel-tuiSet SELinux to Permissive, Customize and enable WWW and Secure WWW on the firewallCreate the sasl2 configuration for apache:echo &amp;ldquo;pwcheck_method:saslauthd&amp;rdquo; &amp;gt; /usr/lib/sasl2/apache-httpd.confNow we need to install Subversion 1.5.2:wget &lt;a href="http://summersoft.fay.ar.us/pub/subversion/1.5.2/rhel-5/i386/subversion-1.5.2-1.i386.rpmwget"&gt;http://summersoft.fay.ar.us/pub/subversion/1.5.2/rhel-5/i386/subversion-1.5.2-1.i386.rpmwget&lt;/a&gt; &lt;a href="http://summersoft.fay.ar.us/pub/subversion/1.5.2/rhel-5/i386/neon-0.27.2-1.i386.rpmwget"&gt;http://summersoft.fay.ar.us/pub/subversion/1.5.2/rhel-5/i386/neon-0.27.2-1.i386.rpmwget&lt;/a&gt; &lt;a href="http://summersoft.fay.ar.us/pub/subversion/1.5.2/rhel-5/i386/mod_dav_svn-1.5.2-1.i386.rpmyum"&gt;http://summersoft.fay.ar.us/pub/subversion/1.5.2/rhel-5/i386/mod_dav_svn-1.5.2-1.i386.rpmyum&lt;/a&gt; install perl-URIrpm -i neon-0.27.2-1.i386.rpm rpm -i subversion-1.5.2-1.i386.rpmrpm -i mod_dav_svn-1.5.2-1.i386.rpmNext modify the apache conf file for our subversion repositories: /etc/httpd/conf.d/subversion.conf# Needed to do Subversion Apache server.LoadModule dav_svn_module modules/mod_dav_svn.so# Only needed if you decide to do &amp;ldquo;per-directory&amp;rdquo; access control.#LoadModule authz_svn_module modules/mod_authz_svn.so&amp;lt;Location /svn&amp;gt; DAV svn SVNParentPath /var/www/svn &lt;!-- raw HTML omitted --&gt; # Limit write permission to list of valid users. &lt;!-- raw HTML omitted --&gt; # Require SSL connection for password protection. # SSLRequireSSL AuthType Basic AuthName &amp;ldquo;EXAMPLE&amp;rdquo; AuthBasicProvider sasl AuthSaslPwcheckMethod saslauthd auxprop AuthSaslAppname apache-httpd AuthSaslRealm example Require valid-user &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Next, create the subversion projects root and restart Apache:mkdir /var/www/svnchown -R apache.apache /var/www/svnservice httpd restartAt this point you can now create a test repository:svnadmin create /var/www/svn/testchown -R apache.apache /var/www/svn/testLet&amp;rsquo;s test if subversion is working:svn info http://localhost/svn/testsvn mkdir &amp;ndash;username myWindowsUsername &amp;ndash;message &amp;ldquo;a test commit&amp;rdquo; http://localhost/svn/test/trunkAt this point we should have subversion up and running.&lt;/p&gt;</description></item><item><title>Acer Aspire One, Huawei E169G and Three IR</title><link>https://stephenc.github.io/post/2008-10-01-acer-aspire-one-huawei-e169g-and-three-ir/</link><pubDate>Wed, 01 Oct 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-10-01-acer-aspire-one-huawei-e169g-and-three-ir/</guid><description>&lt;p&gt;One of my co-workers has asked me to post this up. It&amp;rsquo;s rough and ready, so make of it what you want.First off, Acer recently pushed an update for better performance with the Huawei USB modems&amp;hellip; I&amp;rsquo;m assuming that you have this update&amp;hellip; check if the file /etc/udev/rules.d/10-Huawei-Datacard.rules exists.If that file exists then when you plug in a E169g it will be correctly autodetected without requiring poking about with usbmodeswitch&amp;hellip; it will bind the three serial ports of the E169G to /dev/HuaweiMobile-0, /dev/HuaweiMobile-1 and /dev/HuaweiMobile-2.OK, so assuming you see these device nodes after plugging in the E169G, the next problem is getting wvdial to connect. Here&amp;rsquo;s the wvdial.conf file I use[Dialer Defaults]Init2 = ATZInit3 = ATHInit4 = ATQ0 V1 E1 S0=0 &amp;amp;C1 &amp;amp;D2 +FCLASS=0Stupid Mode = 1Modem Type = USB ModemISDN = 0Phone = *99#Modem = /dev/HuaweiMobile-0Username = usernamePassword = passwordDial Command = ATDTBaud = 460800Init5 = AT+CGDCONT=1,&amp;ldquo;IP&amp;rdquo;,&amp;ldquo;3ireland.ie&amp;quot;By the way, the username is actually &amp;ldquo;username&amp;rdquo;, and the password is actually &amp;ldquo;password&amp;rdquo;.That should be enough to get any self-respecting linux freak 90% of the way there. There was some stuff I had to tweak to get DHCP to populate resolve.conf from the pppd connection&amp;hellip; and I added the following udev rule as 70-huawei-e169g-dial.rulesSUBSYSTEM==&amp;ldquo;usb&amp;rdquo; SYSFS{idProduct}==&amp;ldquo;1001&amp;rdquo;,SYSFS{idVendor}==&amp;ldquo;12d1&amp;rdquo;,RUN+=&amp;quot;/usr/sbin/e169g_dial&amp;quot;And, /usr/sbin/e169g_dial is just#!/bin/shsleep 5/usr/bin/wvdial 2&amp;gt;&amp;amp;1 &amp;gt; /var/log/wvdial &amp;amp;You might be able to tune down from 5 seconds if you can be bothered&amp;hellip; but you need at least some delay&lt;/p&gt;</description></item><item><title>Writing a Hudson plugin (Part 7 - Putting it all together)</title><link>https://stephenc.github.io/post/2008-06-01-writing-a-hudson-plugin-part-7-putting-it-all-together/</link><pubDate>Sun, 01 Jun 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-06-01-writing-a-hudson-plugin-part-7-putting-it-all-together/</guid><description>&lt;p&gt;Life gets in the way&amp;hellip; but we&amp;rsquo;re back with our final installment! So where to start, let&amp;rsquo;s start with a publisher for freestyle builds, then we&amp;rsquo;ll add a publisher for Maven 2 builds&amp;hellip; These will both require some reports to display results, and then finally we&amp;rsquo;ll need the plugin entry point. But before we get into all that, perhaps I should briefly explain structured form submission supportDataBoundConstructorsHudson uses Stapler as it&amp;rsquo;s web framework. One of the things that Stapler provides is support for constructing objects from a JSON data model. Basically, if you have a class with a public constructor annotated with @DataBoundConstructor, Stapler will bind fields from a JSON object by matching the field name to the constructor parameter name. If a parameter also has a @DataBoundConstructor, then Stapler will recurse to construct this child object from the child JSON object.Note: The only hole in this (at the moment) is if you want to inject a variable class, i.e. it does not support the case where there are three ChildImpl classes all implementing Child, and all with @DataBoundConstructor and Parent&amp;rsquo;s constructor has a parameter which takes Child&amp;hellip; However, plans are afoot to fix this!JavaNCSSPublisherPublishers in Hudson must have a Descriptor, this will be registered with Hudson and allows Hudson to create Publisher instances which have the details for the project they are publishing. Descriptors are normally implemented as an inner class called DescriptorImpl and there is normally a static field of the publisher DESCRIPTOR that holds the Descriptor singleton. 99.995% of the time, you will want your publisher to have a @DataBoundConstructor, so without further delay, here is the publisher:package hudson.plugins.javancss;import hudson.maven.MavenModule;import hudson.maven.MavenModuleSet;import hudson.model.AbstractProject;import hudson.model.Action; import hudson.model.Descriptor;import hudson.plugins.helpers.AbstractPublisherImpl;import hudson.plugins.helpers.Ghostwriter;import hudson.tasks.BuildStepDescriptor;import hudson.tasks.Publisher;import net.sf.json.JSONObject;import org.kohsuke.stapler.DataBoundConstructor;import org.kohsuke.stapler.StaplerRequest;public class JavaNCSSPublisher extends AbstractPublisherImpl { private String reportFilenamePattern; @DataBoundConstructor public JavaNCSSPublisher(String reportFilenamePattern) { reportFilenamePattern.getClass(); this.reportFilenamePattern = reportFilenamePattern; } public String getReportFilenamePattern() { return reportFilenamePattern; } public boolean needsToRunAfterFinalized() { return false; } public static final DescriptorImpl DESCRIPTOR = new DescriptorImpl(); public Descriptor&lt;!-- raw HTML omitted --&gt; getDescriptor() { return DESCRIPTOR; } public Action getProjectAction(AbstractProject&lt;!-- raw HTML omitted --&gt; project) { return new JavaNCSSProjectIndividualReport(project); } protected Ghostwriter newGhostwriter() { return new JavaNCSSGhostwriter(reportFilenamePattern); } public static final class DescriptorImpl extends BuildStepDescriptor&lt;!-- raw HTML omitted --&gt; { private DescriptorImpl() { super(JavaNCSSPublisher.class); } public String getDisplayName() { return &amp;ldquo;Publish &amp;quot; + PluginImpl.DISPLAY_NAME; } public boolean isApplicable(Class&lt;!-- raw HTML omitted --&gt;&amp;gt; extends AbstractBuildAction&lt;!-- raw HTML omitted --&gt; { private final Collection&lt;!-- raw HTML omitted --&gt; results; private final Statistic totals; public AbstractBuildReport(Collection&lt;!-- raw HTML omitted --&gt; results) { this.results = results; this.totals = Statistic.total(results); } public Collection&lt;!-- raw HTML omitted --&gt; getResults() { return results; } public Statistic getTotals() { return totals; } public String getSummary() { AbstractBuild&lt;!-- raw HTML omitted --&gt; prevBuild = getBuild().getPreviousBuild(); while (prevBuild != null &amp;amp;&amp;amp; prevBuild.getAction(getClass()) == null) { prevBuild = prevBuild.getPreviousBuild(); } if (prevBuild == null) { return totals.toSummary(); } else { AbstractBuildReport action = prevBuild.getAction(getClass()); return totals.toSummary(action.getTotals()); } } public String getIconFileName() { return PluginImpl.ICON_FILE_NAME; } public String getDisplayName() { return PluginImpl.DISPLAY_NAME; } public String getUrlName() { return PluginImpl.URL; } public boolean isGraphActive() { return false; }}Similarly, we have AbstractProjectReport which will be used for project reports:package hudson.plugins.javancss;import java.io.IOException;import java.util.Collection;import java.util.Collections;import hudson.model.AbstractBuild;import hudson.model.AbstractProject;import hudson.model.ProminentProjectAction;import hudson.plugins.helpers.AbstractProjectAction;import hudson.plugins.javancss.parser.Statistic;import org.kohsuke.stapler.StaplerRequest;import org.kohsuke.stapler.StaplerResponse;public abstract class AbstractProjectReport&amp;lt;T extends AbstractProject&lt;!-- raw HTML omitted --&gt;&amp;gt; extends AbstractProjectAction&lt;!-- raw HTML omitted --&gt; implements ProminentProjectAction { public AbstractProjectReport(T project) { super(project); } public String getIconFileName() { for (AbstractBuild&lt;!-- raw HTML omitted --&gt; build = getProject().getLastBuild(); build != null; build = build.getPreviousBuild()) { final AbstractBuildReport action = build.getAction(getBuildActionClass()); if (action != null) { return PluginImpl.ICON_FILE_NAME; } } return null; } public String getDisplayName() { for (AbstractBuild&lt;!-- raw HTML omitted --&gt; build = getProject().getLastBuild(); build != null; build = build.getPreviousBuild()) { final AbstractBuildReport action = build.getAction(getBuildActionClass()); if (action != null) { return PluginImpl.DISPLAY_NAME; } } return null; } public String getUrlName() { for (AbstractBuild&lt;!-- raw HTML omitted --&gt; build = getProject().getLastBuild(); build != null; build = build.getPreviousBuild()) { final AbstractBuildReport action = build.getAction(getBuildActionClass()); if (action != null) { return PluginImpl.URL; } } return null; } public String getSearchUrl() { return PluginImpl.URL; } public boolean isGraphActive() { return false; } public Collection&lt;!-- raw HTML omitted --&gt; getResults() { for (AbstractBuild&lt;!-- raw HTML omitted --&gt; build = getProject().getLastBuild(); build != null; build = build.getPreviousBuild()) { final AbstractBuildReport action = build.getAction(getBuildActionClass()); if (action != null) { return action.getResults(); } } return Collections.emptySet(); } public Statistic getTotals() { for (AbstractBuild&lt;!-- raw HTML omitted --&gt; build = getProject().getLastBuild(); build != null; build = build.getPreviousBuild()) { final AbstractBuildReport action = build.getAction(getBuildActionClass()); if (action != null) { return action.getTotals(); } } return null; } protected abstract Class&lt;!-- raw HTML omitted --&gt;&amp;gt; implements AggregatableAction { public JavaNCSSBuildIndividualReport(Collection&lt;!-- raw HTML omitted --&gt; results) { super(results); } @Override public synchronized void setBuild(AbstractBuild&lt;!-- raw HTML omitted --&gt; build) { super.setBuild(build); if (this.getBuild() != null) { for (Statistic r : getResults()) { r.setOwner(this.getBuild()); } } } public MavenAggregatedReport createAggregatedAction(MavenModuleSetBuild build, Map&amp;lt;MavenModule, List&lt;!-- raw HTML omitted --&gt;&amp;gt; moduleBuilds) { return new JavaNCSSBuildAggregatedReport(build, moduleBuilds); }}That was fairly painless&amp;hellip; Note that we interfaces for both the freestyle and maven2 project types, this is OK as the freestyle projects will ignore the Maven2 stuff and vice-versa while the common code is shared by both. Next we need the aggregated build report:package hudson.plugins.javancss;import hudson.maven.*;import hudson.model.Action;import hudson.plugins.javancss.parser.Statistic;import java.util.ArrayList;import java.util.Collection;import java.util.List;import java.util.Map;public class JavaNCSSBuildAggregatedReport extends AbstractBuildReport&lt;!-- raw HTML omitted --&gt; implements MavenAggregatedReport { public JavaNCSSBuildAggregatedReport(MavenModuleSetBuild build, Map&amp;lt;MavenModule, List&lt;!-- raw HTML omitted --&gt;&amp;gt; moduleBuilds) { super(new ArrayList&lt;!-- raw HTML omitted --&gt;()); setBuild(build); } public synchronized void update(Map&amp;lt;MavenModule, List&lt;!-- raw HTML omitted --&gt;&amp;gt; moduleBuilds, MavenBuild newBuild) { JavaNCSSBuildIndividualReport report = newBuild.getAction(JavaNCSSBuildIndividualReport.class); if (report != null) { Collection&lt;!-- raw HTML omitted --&gt; u = Statistic.merge(report.getResults(), getResults()); getResults().clear(); getResults().addAll(u); getTotals().add(report.getTotals()); } } public Class&lt;!-- raw HTML omitted --&gt;&amp;gt; implements ProminentProjectAction { public JavaNCSSProjectIndividualReport(AbstractProject&lt;!-- raw HTML omitted --&gt; project) { super(project); } protected Class&amp;lt;? extends AbstractBuildReport&amp;gt; getBuildActionClass() { return JavaNCSSBuildIndividualReport.class; }}Don&amp;rsquo;t repeat ourselves comes in handy here as essentially all the work has been done for us!. The project aggregated report:package hudson.plugins.javancss;import hudson.model.Actionable;import hudson.model.ProminentProjectAction;import hudson.model.AbstractBuild;import hudson.model.Action;import hudson.maven.MavenModuleSet;import hudson.maven.MavenModuleSetBuild;import hudson.plugins.javancss.parser.Statistic;public class JavaNCSSProjectAggregatedReport extends AbstractProjectReport&lt;!-- raw HTML omitted --&gt; implements ProminentProjectAction { public JavaNCSSProjectAggregatedReport(MavenModuleSet project) { super(project); } protected Class&amp;lt;? extends AbstractBuildReport&amp;gt; getBuildActionClass() { return JavaNCSSBuildAggregatedReport.class; }}Again DRY to the rescue&amp;hellip; At this point all that remains is to present the reports from these backing objects&amp;hellip; so on with the jelly views. The helper classes and our inheritance makes this easy&amp;hellip; all we need is two jelly files: hudson/plugins/javancss/AbstractBuildReport/reportDetail.jelly and hudson/plugins/javancss/AbstractProjectReport/reportDetail.jelly. Here they are:&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;rdquo; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;Results&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;Package&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;Classes&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;Functions&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;Javadocs&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;NCSS&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;JLC&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;SLCLC&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;MLCLC&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;Totals&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${it.totals.classes}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${it.totals.functions}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${it.totals.javadocs}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${it.totals.ncss}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${it.totals.javadocLines}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${it.totals.singleCommentLines}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${it.totals.multiCommentLines}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;j:forEach var=&amp;ldquo;r&amp;rdquo; items=&amp;quot;${it.results}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.name}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.classes}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.functions}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.javadocs}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.ncss}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.javadocLines}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.singleCommentLines}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;${r.multiCommentLines}&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;/j:forEach&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&amp;lt;/j:jelly&amp;gt;Yep, the two files are identical! Other plugins may not be quite so lucky&amp;hellip; but in general the project level report should be the same as the report for the latest buildMaking a pluginNow we are ready to make our plugin&amp;hellip;. for this we need a class that extends hudson.Plugin and registers our publisher&amp;rsquo;s descriptors with the appropriate lists&amp;hellip; here it is:package hudson.plugins.javancss;import hudson.Plugin;import hudson.maven.MavenReporters;import hudson.tasks.BuildStep;public class PluginImpl extends Plugin { public void start() throws Exception { BuildStep.PUBLISHERS.add(JavaNCSSPublisher.DESCRIPTOR); MavenReporters.LIST.add(JavaNCSSMavenPublisher.DESCRIPTOR); } public static String DISPLAY_NAME = &amp;ldquo;Java NCSS Report&amp;rdquo;; public static String GRAPH_NAME = &amp;ldquo;Java NCSS Trend&amp;rdquo;; public static String URL = &amp;ldquo;javancss&amp;rdquo;; public static String ICON_FILE_NAME = &amp;ldquo;graph.gif&amp;rdquo;;}And that&amp;rsquo;s pretty much it&amp;hellip; we should have a working pluginFinishing touchesOK, so the plugin does not have health reports (i.e. the weather icons) and it does not show a trend graph&amp;hellip; I think I&amp;rsquo;m going to need a part 8 :-(&lt;/p&gt;</description></item><item><title>More praise for Hudson</title><link>https://stephenc.github.io/post/2008-04-01-more-praise-for-hudson/</link><pubDate>Tue, 01 Apr 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-04-01-more-praise-for-hudson/</guid><description>&lt;p&gt;Over on the Maven2 Users list a recent poster asked what CI server was best, and Hudson was the only answer.Then Jason van Zyl posted this praise for Hudson:I know from my vantage point Hudson is the only system I will provide commercial support for at Sonatype because the battle is over. Hudson won by making developers lives&amp;rsquo; easier. Kohsuke will go to no end to make things easier for users. &amp;hellip;At any rate I guarantee you that inside 3 months Hudson will have the best Maven integration of any CI/Build Server there is.I&amp;rsquo;m personally biased towards Hudson, but I have to agree that it has won the war of the CI servers. I don&amp;rsquo;t see anything coming close in ease of use or speed of startup.&lt;/p&gt;</description></item><item><title>Writing a Hudson plugin (Part 6 - Parsing the results)</title><link>https://stephenc.github.io/post/2008-04-01-writing-a-hudson-plugin-part-6-parsing-the-results/</link><pubDate>Tue, 01 Apr 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-04-01-writing-a-hudson-plugin-part-6-parsing-the-results/</guid><description>&lt;p&gt;In some ways parsing the JavaNCSS results is the least interesting part of developing a Hudson plugin, as once I have implemented the parser, it is available for everyone. For that reason I will focus more on:best practice techniques for parsing resultscommon gotchasdesigning for extensionGetting startedFirst off, we need to analyse the results file format. In the case of JavaNCSS there are multiple ways that the results file can be generated: from the JavaNCSS program directly, from ANT or from Maven. This leads us onto gotcha #1Gotcha #1:Never assume that a build tool generates the same format of output when run from the command line, ANT or Maven.A case in point for Gotcha #1 is Findbugs which generates one XML format from the command line and ANT, and generates a different format that appears similar at first glance when run from Maven (mail thread). In this case it turns out that Maven 1 used the different format output, and it is feared that some people came to depend on this Maven 1 format, so when the plugin for Maven 2 was developed, they kept the Maven 1 format. In any case, the moral is don’t assume, check!So we use the sample projects from Part 1 and generate an ANT and a Maven 2 XML report. First off, here is the report from ANT:&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;2008-04-12&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;11:22:30&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.common&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;3&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;10&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;3&lt;!-- raw HTML omitted --&gt; &amp;lt;javadoc_lines&amp;gt;12&amp;lt;/javadoc_lines&amp;gt; &amp;lt;single_comment_lines&amp;gt;0&amp;lt;/single_comment_lines&amp;gt; &amp;lt;multi_comment_lines&amp;gt;0&amp;lt;/multi_comment_lines&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;5&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;8&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;46&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;9&lt;!-- raw HTML omitted --&gt; &amp;lt;javadoc_lines&amp;gt;37&amp;lt;/javadoc_lines&amp;gt; &amp;lt;single_comment_lines&amp;gt;0&amp;lt;/single_comment_lines&amp;gt; &amp;lt;multi_comment_lines&amp;gt;0&amp;lt;/multi_comment_lines&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Packages&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Classes&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Functions&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;NCSS&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Javadocs&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;per&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;4.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;5.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;8.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;46.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;9.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Project&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.25&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;2.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;11.50&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;2.25&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Package&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.60&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;9.20&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.80&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Class&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;5.75&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.13&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Function&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.common.Factory&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;7&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;3&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;0&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;3&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;6.60&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1.60&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;0.00&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1.80&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;46.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.common.Factory.Factory()&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt;46.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;OK, first off, for those following the tutorial exactly, I have cheated a little. I added some more source files into the project to make sure that I have multiple classes is different packages. You can see the source code I built from here. Additionally, I have trimmed the output somewhat to highlight the interesting bits, removing the duplicate entries.From this report file we can see a basic XML structure:The root element is &lt;!-- raw HTML omitted --&gt; and has child elements: &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, and &lt;!-- raw HTML omitted --&gt;The &lt;!-- raw HTML omitted --&gt; and &lt;!-- raw HTML omitted --&gt; elements are the timestamp when the report was generated with the date in YYYY-MM-DD format and the time in HH:MM:SS formatThe &lt;!-- raw HTML omitted --&gt; element has child elements: &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, and &lt;!-- raw HTML omitted --&gt;. There are multiple &lt;!-- raw HTML omitted --&gt;; elements, but only one &lt;!-- raw HTML omitted --&gt; and &lt;!-- raw HTML omitted --&gt; element.The &lt;!-- raw HTML omitted --&gt; elements have child elements: &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &amp;lt;javadoc_lines&amp;gt;, &amp;lt;single_comment_lines&amp;gt; and &amp;lt;multi_comment_lines&amp;gt;. The &lt;!-- raw HTML omitted --&gt; element contains the name of the package as a String and the other elements contain totals as Integers.The &lt;!-- raw HTML omitted --&gt; element has child elements: &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt;, &amp;lt;javadoc_lines&amp;gt;, &amp;lt;single_comment_lines&amp;gt; and &amp;lt;multi_comment_lines&amp;gt;. These elements are the sum of all the corresponding &lt;!-- raw HTML omitted --&gt; children inside the &lt;!-- raw HTML omitted --&gt; parentThe &lt;!-- raw HTML omitted --&gt; element seems to be a HTML table.The &lt;!-- raw HTML omitted --&gt; element has child elements: &lt;!-- raw HTML omitted --&gt;, &lt;!-- raw HTML omitted --&gt; and &lt;!-- raw HTML omitted --&gt;. There are multiple &lt;!-- raw HTML omitted --&gt; elements, the &lt;!-- raw HTML omitted --&gt; element contains the average results for all the &lt;!-- raw HTML omitted --&gt; elements and the &lt;!-- raw HTML omitted --&gt; element providing some form of total or average.The &lt;!-- raw HTML omitted --&gt; element has child elements: &lt;!-- raw HTML omitted --&gt; and &lt;!-- raw HTML omitted --&gt;. Again there are multiple &lt;!-- raw HTML omitted --&gt; elements with the &lt;!-- raw HTML omitted --&gt; element providing some form of total or average (interestingly the result appears to be the same as from &lt;!-- raw HTML omitted --&gt;).Now, let’s take a look at what Maven 2 gives us:&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;2008-04-12&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;11:43:06&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.common&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;3&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;10&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;3&lt;!-- raw HTML omitted --&gt; &amp;lt;javadoc_lines&amp;gt;12&amp;lt;/javadoc_lines&amp;gt; &amp;lt;single_comment_lines&amp;gt;0&amp;lt;/single_comment_lines&amp;gt; &amp;lt;multi_comment_lines&amp;gt;0&amp;lt;/multi_comment_lines&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;5&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;8&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;46&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;10&lt;!-- raw HTML omitted --&gt; &amp;lt;javadoc_lines&amp;gt;42&amp;lt;/javadoc_lines&amp;gt; &amp;lt;single_comment_lines&amp;gt;3&amp;lt;/single_comment_lines&amp;gt; &amp;lt;multi_comment_lines&amp;gt;3&amp;lt;/multi_comment_lines&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Packages&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Classes&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Functions&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;NCSS&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Java &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;4.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;5.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;8.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;46.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;10.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;P &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.25&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;2.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;11.50&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;2.50&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Packag &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.60&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;9.20&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;2.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Class&lt;!-- raw HTML omitted --&gt;&amp;lt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;5.75&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.25&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Function&lt;!-- raw HTML omitted --&gt;&amp;lt;/ &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.common.api.Namer&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;0&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;6.60&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1.60&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;0.00&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;2.00&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;46.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.common.api.Namer.newName()&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;0&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;hellip; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;46.00&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Thankfully, this is the same format as for ANT. You will also be relieved to know that this is the format generated by the JavaNCSS program directly. Thus we only have to write one parser, and we do not have to detect what format we are parsing. But before I forget:Best Practice #1:When there are multiple formats of a report generated by different tools, make sure that your Hudson plugin can detect the different formats and can handle them appropriately (by either delegating to a different parser implementation, or by handling the differences on the fly).One of the goals of Hudson is to minimise configuration. So when a plugin can detect an configuration option automatically, it should detect it automatically (possibly providing an “Advanced” option button to let users override the detection if Hudson gets it wrong)Start smallLooking at the JavaNCSS output, I see that there is a lot of information&amp;hellip; and I only have one more Part left in this series! So I am not going to parse everything. I am sure that in the future I will extend the Hudson plugin to parse all of the file, but for now I am just going to concentrate on the &lt;!-- raw HTML omitted --&gt; element. This gives users something useful and it’s better than nothing.But what happens when I do get around to parsing the &lt;!-- raw HTML omitted --&gt; and &lt;!-- raw HTML omitted --&gt; elements? People may have lots of old builds and they will want to see the trends of the &lt;!-- raw HTML omitted --&gt; and &lt;!-- raw HTML omitted --&gt; results. I have two choices:Tell them “Sorry, out of luck”Save the results with the build, and then the newer parser can extract the results when people want the trend.Choosing between these two options can be difficult. My preference is to go with option two, as long as the results are not a really big file.Best Practice #2:If you are not parsing everything in the results file, and the results file is not too big, and it can be parsed without reference to the source code, copy the results file to Hudson so that future versions of your plugin can read the information you are not currently parsing.Don’t over parseThe results that we parse are going to be placed into an Action object. This Action object will be serialized. When Hudson starts up, it reads all the results of all the builds. If we place too much information in our Action object, this can have a detrimental effect on Hudson’s performance. When users have 50+ projects each with a couple of hundred builds, they will thank you for keeping your Action objects small.Gotcha #2:Don’t store too much in your Action objects.Don’t under parseOK, so I have just given out about storing too much in your Action objects. There is a second problem&amp;hellip; not storing enough! Most reporting plugins try to present a trend graph to show progress over a number of builds. If we don’t store the information required to generate this trend graph inside our Action objects, then displaying the trend graph will require parsing all the result files for all builds of a project. This can have a detrimental effect on Hudson’s performance. When users have projects with a couple of hundred builds, they will thank you for keeping the information to generate the main trend graph inside your Action objects.Gotcha #3:Store the information for generating the Project level trend graph in your Action objects.A case in point for Gotach #3 is the cobertura plugin, which at the time of writing, does not store the information for the main trend graph in the Action object. I fully intend to fix this situation once I have finished this series!How to parseMost of the result files that you will encounter are XML based. We are writing our plugins in Java, so that gives us a range of parsers to choose from, e.g.SAXDOMStAXRoll your ownEtc.Given that report files can end up very big for very big projects, we need to be careful how we parse the results:Gotcha #4:Don’t parse XML results using DOM, as this will require reading the entire report file into memory.I am going to stick my neck out and make a recommendation:Best Practice #3:Use an XML pull parser to parse XML report files.They are generally faster, use less memory, and are better suited to a “hit-and-run” style of result extraction.Be able to aggregate parsing resultsYou may think that there will only ever be one result file that you need to parse. Maven 2 usually throws a spanner into that model, and everyone has their own ANT build script, so:Gotcha #5:Don’t assume you only have to parse one report file for each project.This gotcha arrives from the code coverage plugins (emma, clover, cobertura). Initially, you would think that people are only interested in one code coverage result, i.e. the coverage for the project&amp;hellip; so they will only have one result file that we need to parse, right? Wrong! Some tools/build scripts generate a report for each module but only generate a summary report in non-conforming HTML. Some tools / build scripts generate a report for unit tests and integration tests separately. It’s a mess, and don’t get me started on using different tools for different test types&amp;hellip;The parsing engineOk, so here is the parsing engine:package hudson.plugins.javancss.parser;import hudson.model.AbstractBuild;import hudson.util.IOException2;import org.xmlpull.v1.XmlPullParser;import org.xmlpull.v1.XmlPullParserException;import org.xmlpull.v1.XmlPullParserFactory;import java.io.&lt;em&gt;;import java.util.&lt;/em&gt;;public class Statistic implements Serializable { private AbstractBuild&lt;!-- raw HTML omitted --&gt; owner; private String name; private long classes; private long functions; private long ncss; private long javadocs; private long javadocLines; private long singleCommentLines; private long multiCommentLines; public static Collection&lt;!-- raw HTML omitted --&gt; parse(File inFile) throws IOException, XmlPullParserException { Collection&lt;!-- raw HTML omitted --&gt; results = new ArrayList&lt;!-- raw HTML omitted --&gt;(); FileInputStream fis = null; BufferedInputStream bis = null; try { fis = new FileInputStream(inFile); bis = new BufferedInputStream(fis); XmlPullParserFactory factory = XmlPullParserFactory.newInstance(); factory.setNamespaceAware(true); factory.setValidating(false); XmlPullParser parser = factory.newPullParser(); parser.setInput(bis, null); // check that the first tag is &lt;!-- raw HTML omitted --&gt; expectNextTag(parser, &amp;ldquo;javancss&amp;rdquo;); // skip until we get to the &lt;!-- raw HTML omitted --&gt; tag while (parser.getDepth() &amp;gt; 0 &amp;amp;&amp;amp; (parser.getEventType() != XmlPullParser.START_TAG || !&amp;ldquo;packages&amp;rdquo;.equals(parser.getName()))) { parser.next(); } while (parser.getDepth() &amp;gt; 0 &amp;amp;&amp;amp; (parser.getEventType() != XmlPullParser.START_TAG || !&amp;ldquo;package&amp;rdquo;.equals(parser.getName()))) { parser.next(); } while (parser.getDepth() &amp;gt;= 2 &amp;amp;&amp;amp; parser.getEventType() == XmlPullParser.START_TAG &amp;amp;&amp;amp; &amp;ldquo;package&amp;rdquo;.equals(parser.getName())) { Map&amp;lt;String, String&amp;gt; data = new HashMap&amp;lt;String, String&amp;gt;(); String lastTag = null; String lastText = null; int depth = parser.getDepth(); while (parser.getDepth() &amp;gt;= depth) { parser.next(); switch (parser.getEventType()) { case XmlPullParser.START_TAG: lastTag = parser.getName(); break; case XmlPullParser.TEXT: lastText = parser.getText(); break; case XmlPullParser.END_TAG: if (parser.getDepth() == 4 &amp;amp;&amp;amp; lastTag != null &amp;amp;&amp;amp; lastText != null) { data.put(lastTag, lastText); } lastTag = null; lastText = null; break; } } if (data.containsKey(&amp;ldquo;name&amp;rdquo;)) { Statistic s = new Statistic(data.get(&amp;ldquo;name&amp;rdquo;)); s.setClasses(Long.valueOf(data.get(&amp;ldquo;classes&amp;rdquo;))); s.setFunctions(Long.valueOf(data.get(&amp;ldquo;functions&amp;rdquo;))); s.setNcss(Long.valueOf(data.get(&amp;ldquo;ncss&amp;rdquo;))); s.setJavadocs(Long.valueOf(data.get(&amp;ldquo;javadocs&amp;rdquo;))); s.setJavadocLines(Long.valueOf(data.get(&amp;ldquo;javadoc_lines&amp;rdquo;))); s.setSingleCommentLines(Long.valueOf(data.get(&amp;ldquo;single_comment_lines&amp;rdquo;))); s.setMultiCommentLines(Long.valueOf(data.get(&amp;ldquo;multi_comment_lines&amp;rdquo;))); results.add(s); } parser.next(); } } catch (XmlPullParserException e) { throw new IOException2(e); } finally { if (bis != null) { bis.close(); } if (fis != null) { fis.close(); } } return results; } private static void skipTag(XmlPullParser parser) throws IOException, XmlPullParserException { parser.next(); endElement(parser); } private static void expectNextTag(XmlPullParser parser, String tag) throws IOException, XmlPullParserException { while (true) { if (parser.getEventType() != XmlPullParser.START_TAG) { parser.next(); continue; } if (parser.getName().equals(tag)) { return; } throw new IOException(&amp;ldquo;Expecting tag &amp;quot; + tag); } } private static void endElement(XmlPullParser parser) throws IOException, XmlPullParserException { int depth = parser.getDepth(); while (parser.getDepth() &amp;gt;= depth) { parser.next(); } } public Statistic(String name) { this.name = name; } &amp;hellip; // Simple getters and setters for all the private fields &amp;hellip; // equals based on all private fields, hashCode based on // name and owner. &amp;hellip; // toString &amp;hellip;}Essentially the main work is done in the static parse method. It takes a File and tries to parse it. We get an XML Pull Parser for the stream and ensure that it is neither namespace aware nor validating as the file format does not use namespaces and we will be forgiving on the XML format.The first tag should be &lt;!-- raw HTML omitted --&gt; and after that we skip until we get a &lt;!-- raw HTML omitted --&gt; tag. Once we have found the &lt;!-- raw HTML omitted --&gt; tag we skip until we hit the first &lt;!-- raw HTML omitted --&gt; tag.We are reverse engineering the JavaNCSS file format, so we will not make any assumptions about the order of the child elements in the &lt;!-- raw HTML omitted --&gt; element. We put all the child elements into a Map keyed by the element name, and then when we reach the end of the &lt;!-- raw HTML omitted --&gt; element we pull out the information we were after from the Map and put it into a Statistic object and add that to the collection of results that we will return.As soon as we hit the end of the &lt;!-- raw HTML omitted --&gt; element, we stop parsing.Supporting aggregationIn order to support aggregation of multiple results, we&amp;rsquo;ll add some utility methods to the Statistic class, first we need methods that allow us to calculate totals:package hudson.plugins.javancss.parser;&amp;hellip;public class Statistic implements Serializable { &amp;hellip; public static Statistic total(Collection&lt;!-- raw HTML omitted --&gt;&amp;hellip; results) { Collection&lt;!-- raw HTML omitted --&gt; merged = merge(results); Statistic total = new Statistic(&amp;rdquo;&amp;quot;); for (Statistic individual : merged) { total.add(individual); } return total; } public void add(Statistic r) { classes += r.classes; functions += r.functions; ncss += r.ncss; javadocs += r.javadocs; javadocLines += r.javadocLines; singleCommentLines += r.singleCommentLines; multiCommentLines += r.multiCommentLines; } &amp;hellip;}The total method just calculates the total of all the statistics in a collection of statistics. We will also need to be able to merge different result sets. This should aggregate totals for each package separately and return a collection with one total statistic for each package:package hudson.plugins.javancss.parser;&amp;hellip;public class Statistic implements Serializable { &amp;hellip; public static Collection&lt;!-- raw HTML omitted --&gt; merge( Collection&lt;!-- raw HTML omitted --&gt;&amp;hellip; results) { if (results.length == 0) { return Collections.emptySet(); } else if (results.length == 1) { return results[0]; } else { Map&amp;lt;String, Statistic&amp;gt; merged = new HashMap&amp;lt;String, Statistic&amp;gt;(); for (Collection&lt;!-- raw HTML omitted --&gt; result : results) { for (Statistic individual : result) { if (!merged.containsKey(individual.name)) { merged.put(individual.name, new Statistic(individual.name)); } merged.get(individual.name).add(individual); } } return merged.values(); } } &amp;hellip;}That is pretty much it for the parser engine.The GhostwriterNow we need to hook the engine into our publisher. We will need to configure the UI elements and the Actions&amp;hellip; all tasks for the final part, but for now, we&amp;rsquo;ll just hook it up. We want to run the parsing on the slave side so we implement Ghostwriter.SlaveGhostwriter.package hudson.plugins.javancss;import hudson.FilePath;import hudson.model.AbstractBuild;import hudson.model.BuildListener;import hudson.plugins.helpers.BuildProxy;import hudson.plugins.helpers.Ghostwriter;import hudson.plugins.javancss.parser.Statistic;import org.xmlpull.v1.XmlPullParserException;import java.io.File;import java.io.IOException;import java.util.Collection;import java.util.HashSet;import java.util.Set;public class JavaNCSSGhostwriter implements Ghostwriter, Ghostwriter.SlaveGhostwriter { private final String reportFilenamePattern; public JavaNCSSGhostwriter(String reportFilenamePattern) { this.reportFilenamePattern = reportFilenamePattern; } public boolean performFromSlave( BuildProxy build, BuildListener listener) throws InterruptedException, IOException { FilePath[] paths = build.getExecutionRootDir() .list(reportFilenamePattern); Collection&lt;!-- raw HTML omitted --&gt; results = null; Set&lt;!-- raw HTML omitted --&gt; parsedFiles = new HashSet&lt;!-- raw HTML omitted --&gt;(); for (FilePath path : paths) { final String pathStr = path.getRemote(); if (!parsedFiles.contains(pathStr)) { parsedFiles.add(pathStr); try { Collection&lt;!-- raw HTML omitted --&gt; result = Statistic.parse(new File(pathStr)); if (results == null) { results = result; } else { results = Statistic.merge(results, result); } // TODO copy the parsed file to the master } catch (XmlPullParserException e) { e.printStackTrace(listener.getLogger()); } } } // TODO add the results into an Action an attach it to the // build. return true; }}Basically, we search the supplied wildcard-path for report files and merge all the results together into a collection of results. In the final part of this series we will create our Action to hold the results and wire everything together.&lt;/p&gt;</description></item><item><title>Writing a Hudson plugin (Part 5½ - Typos corrected)</title><link>https://stephenc.github.io/post/2008-03-01-writing-a-hudson-plugin-part-5-typos-corrected/</link><pubDate>Sat, 01 Mar 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-03-01-writing-a-hudson-plugin-part-5-typos-corrected/</guid><description>&lt;p&gt;Ok, life has got in the way and I have not been able to update this series as quickly as I originally intended. In any case, there were a number of bugs in Hudson that I discovered and are now fixed, and there was a good deal of tidy-up needed in order for me to figure out what to do for parts 6 and 7. The good news is that I am getting closer to finishing writing these final two parts. The bad news is that there are a number of corrections to the previous posts (I have put some corrections in-line for parts 4 and 5). This post aims to ensure that, for parts 6 and 7, everyone is able to follow from the same code!pom.xmlThis needs to be updated to reference a Hudson version of at least 1.200 in order to have the bugs I identified fixed.src/main/java/hudson/plugins/helpers/AbstractBuildAction.javaAFAIK I escaped all the HTML entities and this file is the same as constructed from the previous posts.package hudson.plugins.helpers;import hudson.model.AbstractBuild;import hudson.model.HealthReportingAction;public abstract class AbstractBuildAction&amp;lt;BUILD extends AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;gt; implements HealthReportingAction { private BUILD build = null; protected AbstractBuildAction() { } public synchronized BUILD getBuild() { return build; } public synchronized void setBuild(BUILD build) { if (this.build == null &amp;amp;&amp;amp; this.build != build) { this.build = build; } } public boolean isFloatingBoxActive() { return false; } public boolean isGraphActive() { return false; } public String getGraphName() { return getDisplayName(); } public String getSummary() { return &amp;ldquo;&amp;rdquo;; }}src/main/java/hudson/plugins/helpers/AbstractMavenReporterImpl.javaAFAIK I escaped all the HTML entities and this file is the same as constructed from the previous posts.package hudson.plugins.helpers;import hudson.maven.MavenBuildProxy;import hudson.maven.MavenReporter;import hudson.maven.MojoInfo;import hudson.model.BuildListener;import hudson.model.Result;import org.apache.maven.project.MavenProject;import java.io.IOException;public abstract class AbstractMavenReporterImpl extends MavenReporter { protected MojoExecutionReportingMode getExecutionMode() { return MojoExecutionReportingMode.ONLY_REPORT_ON_SUCCESS; } public boolean postExecute(MavenBuildProxy build, MavenProject pom, MojoInfo mojo, BuildListener listener, Throwable error) throws InterruptedException, IOException { if (!isExecutingMojo(mojo)) { // not a mojo who&amp;rsquo;s result we are interested in return true; } final Boolean okToContinue = getExecutionMode().isOkToContinue(this, build, listener, error); if (okToContinue != null) { return okToContinue; } build.registerAsProjectAction(this); return BuildProxy.doPerform(newGhostwriter(pom, mojo), build, pom, listener); } protected abstract boolean isExecutingMojo(MojoInfo mojo); protected abstract Ghostwriter newGhostwriter(MavenProject pom, MojoInfo mojo); public boolean preExecute(MavenBuildProxy build, MavenProject pom, MojoInfo mojo, BuildListener listener) throws InterruptedException, IOException { return !isAutoconfMojo(mojo) || autoconfPom(build, pom, mojo, listener); } protected boolean autoconfPom(MavenBuildProxy build, MavenProject pom, MojoInfo mojo, BuildListener listener) { return true; } protected boolean isAutoconfMojo(MojoInfo mojo) { return false; } protected enum MojoExecutionReportingMode { ONLY_REPORT_ON_SUCCESS { Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error) { return error == null ? null : Boolean.TRUE; } }, ALWAYS_REPORT_STABLE { Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error) { return null; }}, REPORT_UNSTABLE_ON_ERROR { Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error) { if (error != null) { listener.getLogger().println(&amp;quot;[HUDSON] &amp;quot; + reporter.getDescriptor().getDisplayName() + &amp;quot; setting build to UNSTABLE&amp;quot;); build.setResult(Result.UNSTABLE); } return null; } }; abstract Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error); }}src/main/java/hudson/plugins/helpers/AbstractProjectAction.javaAFAIK I escaped all the HTML entities and this file is the same as constructed from the previous posts.package hudson.plugins.helpers;import hudson.model.AbstractProject;import hudson.model.Actionable;abstract public class AbstractProjectAction&amp;lt;PROJECT extends AbstractProject&lt;!-- raw HTML omitted --&gt;&amp;gt; extends Actionable { private final PROJECT project; protected AbstractProjectAction(PROJECT project) { this.project = project; } public PROJECT getProject() { return project; } public boolean isFloatingBoxActive() { return true; } public boolean isGraphActive() { return false; } public String getGraphName() { return getDisplayName(); }}src/main/java/hudson/plugins/helpers/AbstractPublisherImpl.javaSome of the HTML entities were not properly escaped.package hudson.plugins.helpers;import hudson.tasks.Publisher;import hudson.model.AbstractBuild;import hudson.model.BuildListener;import hudson.Launcher;import java.io.IOException;public abstract class AbstractPublisherImpl extends Publisher { protected abstract Ghostwriter newGhostwriter(); public boolean perform(AbstractBuild&lt;!-- raw HTML omitted --&gt; build, Launcher launcher, final BuildListener listener) throws InterruptedException, IOException { return BuildProxy.doPerform(newGhostwriter(), build, listener); } public boolean prebuild(AbstractBuild&lt;!-- raw HTML omitted --&gt; build, BuildListener listener) { return true; }}src/main/java/hudson/plugins/helpers/BuildProxy.javaAgain, some of the HTML entities were not properly escaped. Additionally, this is the file that has had the most updates during this tutorial, so here it is in full:package hudson.plugins.helpers;import hudson.FilePath;import hudson.maven.MavenBuildProxy;import hudson.util.IOException2;import hudson.model.Action;import hudson.model.Result;import hudson.model.AbstractBuild;import hudson.model.BuildListener;import java.util.Calendar;import java.util.List;import java.util.ArrayList;import java.io.IOException;import java.io.Serializable;import org.apache.maven.project.MavenProject;public final class BuildProxy implements Serializable { private final FilePath artifactsDir; private final FilePath projectRootDir; private final FilePath buildRootDir; private final FilePath executionRootDir; private final Calendar timestamp; private final List&amp;lt;AbstractBuildAction&amp;lt;AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;raquo; actions = new ArrayList&amp;lt;AbstractBuildAction&amp;lt;AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;raquo;(); private Result result = null; private boolean continueBuild = true; public static boolean doPerform(Ghostwriter ghostwriter, AbstractBuild&lt;!-- raw HTML omitted --&gt; build, BuildListener listener) throws IOException, InterruptedException { // first, do we need to do anything on the slave if (ghostwriter instanceof Ghostwriter.SlaveGhostwriter) { // construct the BuildProxy instance that we will use BuildProxy buildProxy = new BuildProxy( new FilePath(build.getArtifactsDir()), new FilePath(build.getProject().getRootDir()), new FilePath(build.getRootDir()), build.getProject().getModuleRoot(), build.getTimestamp()); BuildProxyCallableHelper callableHelper = new BuildProxyCallableHelper( buildProxy, ghostwriter, listener); try { buildProxy = buildProxy.getExecutionRootDir().act(callableHelper); buildProxy.updateBuild(build); // terminate the build if necessary if (!buildProxy.isContinueBuild()) { return false; } } catch (Exception e) { throw unwrapException(e, listener); } } // finally, on to the master final Ghostwriter.MasterGhostwriter masterGhostwriter = Ghostwriter.MasterGhostwriter.class.cast(ghostwriter); return masterGhostwriter == null || masterGhostwriter.performFromMaster(build, build.getProject().getModuleRoot(), listener); } private static RuntimeException unwrapException(Exception e, BuildListener listener) throws IOException, InterruptedException { if (e.getCause() instanceof IOException) { throw new IOException2(e.getCause().getMessage(), e); } if (e.getCause() instanceof InterruptedException) { e.getCause().printStackTrace(listener.getLogger()); throw new InterruptedException(e.getCause().getMessage()); } if (e.getCause() instanceof RuntimeException) { throw new RuntimeException(e.getCause()); } // How on earth do we get this far down the branch e.printStackTrace(listener.getLogger()); throw new RuntimeException(&amp;ldquo;Unexpected exception&amp;rdquo;, e); } public void updateBuild(AbstractBuild&lt;!-- raw HTML omitted --&gt; build) { for (AbstractBuildAction&amp;lt;AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;gt; action : actions) { if (!build.getActions().contains(action)) { action.setBuild(build); build.getActions().add(action); } } if (result != null &amp;amp;&amp;amp; result.isWorseThan(build.getResult())) { build.setResult(result); } } public static boolean doPerform(Ghostwriter ghostwriter, MavenBuildProxy mavenBuildProxy, MavenProject pom, final BuildListener listener) throws InterruptedException, IOException { // first, construct the BuildProxy instance that we will use BuildProxy buildProxy = new BuildProxy( mavenBuildProxy.getArtifactsDir(), mavenBuildProxy.getProjectRootDir(), mavenBuildProxy.getRootDir(), new FilePath(pom.getBasedir()), mavenBuildProxy.getTimestamp()); // do we need to do anything on the slave if (ghostwriter instanceof Ghostwriter.SlaveGhostwriter) { final Ghostwriter.SlaveGhostwriter slaveGhostwriter = (Ghostwriter.SlaveGhostwriter) ghostwriter; // terminate the build if necessary if (!slaveGhostwriter.performFromSlave(buildProxy, listener)) { return false; } } // finally, on to the master try { return mavenBuildProxy.execute(new BuildProxyCallableHelper( buildProxy, ghostwriter, listener)); } catch (Exception e) { throw unwrapException(e, listener); } } private BuildProxy(FilePath artifactsDir, FilePath projectRootDir, FilePath buildRootDir, FilePath executionRootDir, Calendar timestamp) { this.artifactsDir = artifactsDir; this.projectRootDir = projectRootDir; this.buildRootDir = buildRootDir; this.executionRootDir = executionRootDir; this.timestamp = timestamp; } public List&amp;lt;AbstractBuildAction&amp;lt;AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;raquo; getActions() { return actions; } public FilePath getArtifactsDir() { return artifactsDir; } public FilePath getBuildRootDir() { return buildRootDir; } public FilePath getExecutionRootDir() { return executionRootDir; } public FilePath getProjectRootDir() { return projectRootDir; } public Calendar getTimestamp() { return timestamp; } public Result getResult() { return result; } public void setResult(Result result) { this.result = result; } public boolean isContinueBuild() { return continueBuild; } public void setContinueBuild(boolean continueBuild) { this.continueBuild = continueBuild; }}src/main/java/hudson/plugins/helpers/BuildProxyCallableHelper.javaLost some HTML entities (again!)package hudson.plugins.helpers;import hudson.remoting.Callable;import hudson.maven.MavenBuildProxy;import hudson.maven.MavenBuild;import hudson.model.BuildListener;import java.io.IOException;class BuildProxyCallableHelper implements Callable&amp;lt;BuildProxy, Exception&amp;gt;, MavenBuildProxy.BuildCallable&amp;lt;Boolean, Exception&amp;gt; { private final BuildProxy buildProxy; private final Ghostwriter ghostwriter; private final BuildListener listener; BuildProxyCallableHelper(BuildProxy buildProxy, Ghostwriter ghostwriter, BuildListener listener) { this.buildProxy = buildProxy; this.ghostwriter = ghostwriter; this.listener = listener; } public Boolean call(MavenBuild mavenBuild) throws Exception { buildProxy.updateBuild(mavenBuild); if (ghostwriter instanceof Ghostwriter.MasterGhostwriter) { final Ghostwriter.MasterGhostwriter masterBuildStep = (Ghostwriter.MasterGhostwriter) ghostwriter; return masterBuildStep.performFromMaster(mavenBuild, buildProxy.getExecutionRootDir(), listener); } return true; } public BuildProxy call() throws Exception { if (ghostwriter instanceof Ghostwriter.SlaveGhostwriter) { final Ghostwriter.SlaveGhostwriter slaveBuildStep = (Ghostwriter.SlaveGhostwriter) ghostwriter; try { buildProxy.setContinueBuild( slaveBuildStep.performFromSlave(buildProxy, listener)); return buildProxy; } catch (IOException e) { throw new Exception(e); } catch (InterruptedException e) { throw new Exception(e); } } return buildProxy; }}src/main/java/hudson/plugins/helpers/Ghostwriter.javaJava Generics are a real gotcha for HTML entitiespackage hudson.plugins.helpers;import hudson.model.BuildListener;import hudson.model.AbstractBuild;import hudson.FilePath;import java.io.Serializable;import java.io.IOException;public interface Ghostwriter extends Serializable { public static interface SlaveGhostwriter extends Ghostwriter { boolean performFromSlave(BuildProxy build, BuildListener listener) throws InterruptedException, IOException; } public static interface MasterGhostwriter extends Ghostwriter { boolean performFromMaster(AbstractBuild&lt;!-- raw HTML omitted --&gt; build, FilePath executionRoot, BuildListener listener) throws InterruptedException, IOException; }}src/main/resources/hudson/plugins/helpers/AbstractBuildAction/enlargedGraph.jellyI left a &amp;ldquo;css&amp;rdquo; attribute in the &amp;lt;l:layout&amp;gt; tag.&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.build}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;largeGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractBuildAction/floatingBox.jellyThe &amp;lt;j:if&amp;gt; should be based on the from variable and not it&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;j:if test=&amp;quot;${from.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; ${from.graphName} &lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;enlarge&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;/j:if&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractBuildAction/index.jellyI left a &amp;ldquo;css&amp;rdquo; attribute in the &amp;lt;l:layout&amp;gt; tag.&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.build}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.displayName}&lt;!-- raw HTML omitted --&gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;st:include page=&amp;ldquo;reportDetail.jelly&amp;rdquo;/&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractBuildAction/largeGraph.jelly, src/main/resources/hudson/plugins/helpers/AbstractBuildAction/normalGraph.jelly, and src/main/resources/hudson/plugins/helpers/AbstractBuildAction/reportDetail.jellyThese are all the same content, and are basically empty placeholders to be overrided in classes that extend AbstractBuildAction. I do not think there are any corrections.&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractBuildAction/summary.jellyThe &amp;lt;j:if&amp;gt; had an extra } in the expression&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot; xmlns:i=&amp;ldquo;jelly:fmt&amp;rdquo;&amp;gt; &amp;lt;t:summary icon=&amp;quot;${it.iconFileName}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.displayName}&lt;!-- raw HTML omitted --&gt; ${it.summary} &amp;lt;/t:summary&amp;gt; &amp;lt;j:if test=&amp;quot;${it.floatingBoxActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;floatingBox.jelly&amp;rdquo;/&amp;gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;/j:if&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractProjectAction/enlargedGraph.jellyI left a &amp;ldquo;css&amp;rdquo; attribute in the &amp;lt;l:layout&amp;gt; tag.&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.project}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;largeGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractProjectAction/floatingBox.jellyThe &amp;lt;j:if&amp;gt; should be based on the from variable and not it&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot; xmlns:i=&amp;ldquo;jelly:fmt&amp;rdquo; xmlns:local=&amp;ldquo;local&amp;rdquo;&amp;gt; &amp;lt;j:if test=&amp;quot;${from.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; ${from.graphName} &lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;enlarge&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;/j:if&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractProjectAction/index.jellyI left a &amp;ldquo;css&amp;rdquo; attribute in the &amp;lt;l:layout&amp;gt; tag.&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.project}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.displayName}&lt;!-- raw HTML omitted --&gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;st:include page=&amp;ldquo;reportDetail.jelly&amp;rdquo;/&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;src/main/resources/hudson/plugins/helpers/AbstractProjectAction/largeGraph.jelly, src/main/resources/hudson/plugins/helpers/AbstractProjectAction/normalGraph.jelly, and src/main/resources/hudson/plugins/helpers/AbstractProjectAction/reportDetail.jellyThese are all the same content, and are basically empty placeholders to be overrided in classes that extend AbstractProjectAction. I do not think there are any corrections.&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;&lt;/p&gt;</description></item><item><title>Writing a Hudson plug-in (Part 4 – Abstract Publishers and MavenReporters)</title><link>https://stephenc.github.io/post/2008-02-01-writing-a-hudson-plug-in-part-4-abstract-publishers-and-mavenreporters/</link><pubDate>Fri, 01 Feb 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-02-01-writing-a-hudson-plug-in-part-4-abstract-publishers-and-mavenreporters/</guid><description>&lt;p&gt;This is the fourth installment, which covers the two abstract classes that call the Ghostwriter for us. When we implement our plugin we will extend from these two classes. These classes perform the work of calling the Ghostwriter at the appropriate points in the build, the concrete classes that we will develop in Part 5, however have the responsibility of creating a configured Ghostwriter and providing it to the superclass for execution.AbstractPublisherImplIn a way, this is the simplest of the two classes:package hudson.plugins.helpers;import hudson.tasks.Publisher;import hudson.model.AbstractBuild;import hudson.model.BuildListener;import hudson.Launcher;import java.io.IOException;public abstract class AbstractPublisherImpl extends Publisher { protected abstract Ghostwriter newGhostwriter(); public boolean perform(AbstractBuild build, Launcher launcher, final BuildListener listener) throws InterruptedException, IOException { return BuildProxy.doPerform(newGhostwriter(), build, listener); } public boolean prebuild(AbstractBuild build, BuildListener listener) { return true; }}Fairly simple, we just ask the BuildProxy to invoke the new Ghostwriter created by the concrete class.AbstractMavenReporterImplThis class needs to do a bit more work. First I&amp;rsquo;ll present the abstract methods and protected methods that can be overrided by implementing classes:package hudson.plugins.helpers;import hudson.maven.MavenReporter;import hudson.maven.MojoInfo;import hudson.maven.MavenBuildProxy;import hudson.model.BuildListener;import hudson.model.Result;import hudson.plugins.helpers.BuildProxy;import hudson.plugins.javancss.PluginImpl;import org.apache.maven.project.MavenProject;import java.io.IOException;public abstract class AbstractMavenReporterImpl extends MavenReporter { protected abstract boolean isExecutingMojo(MojoInfo mojo); protected abstract Ghostwriter newGhostwriter(MavenProject pom, MojoInfo mojo); protected boolean autoconfPom(MavenBuildProxy build, MavenProject pom, MojoInfo mojo, BuildListener listener) { return true; } protected boolean isAutoconfMojo(MojoInfo mojo) { return false; }}Maven project execution consists of invocations of various golas of the different mojos that are bound to the Maven lifecycle. Hudson inserts hooks that allow us to intercept mojos before they execute and after they have executed. Intercepting prior to execution can be useful to ensure that the plugin has been configured with the options we require (e.g. XML output enabled). Post execution is usually when we want to invoke our Ghostwriter. If the implementing class wants to be able to tweak the mojo configuration prior to execution it needs to override isAutoconfMojo in order to identify the mojo executions that need to be tweaked, and override autoconfPom to do the actual configuration.The implementing class needs to provide:a isExecutingMojo method to identify execution of the mojo that this publisher reports on.a newGhostwriter method that constructs the Ghostwriter which will do the work for us. The new Ghostwriter can either be configured manually on the build page, and/or can be configured based on information in the pom.The final thing that we need to decide is when to execute the publisher:package hudson.plugins.helpers;&amp;hellip;public abstract class AbstractMavenReporterImpl extends MavenReporter { &amp;hellip; protected MojoExecutionReportingMode getExecutionMode() { return MojoExecutionReportingMode.ONLY_REPORT_ON_SUCCESS; } &amp;hellip; protected enum MojoExecutionReportingMode { ONLY_REPORT_ON_SUCCESS { Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error) { return error == null ? null : Boolean.TRUE; } }, ALWAYS_REPORT_STABLE { Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error) { return null; }}, REPORT_UNSTABLE_ON_ERROR { Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error) { if (error != null) { listener.getLogger().println(&amp;quot;[HUDSON] &amp;quot; + reporter.getDescriptor().getDisplayName() + &amp;quot; setting build to UNSTABLE&amp;quot;); build.setResult(Result.UNSTABLE); } return null; } }; abstract Boolean isOkToContinue(MavenReporter reporter, MavenBuildProxy build, BuildListener listener, Throwable error); }}We define three different execution modes:ONLY_REPORT_ON_SUCCESS - this ensures that we only run the publisher if the mojo executed without error.ALWAYS_REPORT_STABLE - runs the publisher even if the mojo had an execution error, never marks the build as failed or unstable (note that Maven will most likely mark the build as failed or unstable)REPORT_UNSTABLE_ON_ERROR - runs the publisher even if the mojo had an execution error. In the event of a mojo execution error the build will be marked UNSTABLEAll that&amp;rsquo;s left is are the methods to tie these all together:package hudson.plugins.helpers;&amp;hellip;public abstract class AbstractMavenReporterImpl extends MavenReporter { &amp;hellip;. public boolean preExecute(MavenBuildProxy build, MavenProject pom, MojoInfo mojo, BuildListener listener) throws InterruptedException, IOException { return !isAutoconfMojo(mojo) || autoconfPom(build, pom, mojo, listener); } public boolean postExecute(MavenBuildProxy build, MavenProject pom, MojoInfo mojo, BuildListener listener, Throwable error) throws InterruptedException, IOException { if (!isExecutingMojo(mojo)) { // not a mojo who&amp;rsquo;s result we are interested in return true; } final Boolean okToContinue = getExecutionMode() .isOkToContinue(this, build, listener, error); if (okToContinue != null) { return okToContinue; } build.registerAsProjectAction(this); return BuildProxy.doPerform(newGhostwriter(pom, mojo), build, pom, listener); }}The preExecute method checks if this is an mojo execution that we want to tweak, executing the tweaks if necessary. The postExecute method checks if this the the mojo we want to report on. Then it checks if there were execution errors, following the execution mode reported by getExecutionMode. We register this MavenReporter as a project action (thus signalling Hudson that it should call the getProjectAction() method of our reporter. We will have this method return null if we actually don&amp;rsquo;t want a project action. This is safer than trying to be smart and only calling register if we want a project action!). Finally we invoke the Ghostwriter!SummaryWell that&amp;rsquo;s it for Part 4. In the next installment, I will introduce a DRY set of classes for the reports that the publisher will generate&lt;/p&gt;</description></item><item><title>Writing a Hudson plug-in (Part 5 – Reporting)</title><link>https://stephenc.github.io/post/2008-02-01-writing-a-hudson-plug-in-part-5-reporting/</link><pubDate>Fri, 01 Feb 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-02-01-writing-a-hudson-plug-in-part-5-reporting/</guid><description>&lt;p&gt;Until now we have been generating classes that collect the results we want to display. We have not hooked into Hudson&amp;rsquo;s methods of displaying reports. There are essentially four places that we could want to generate reports:In each individual build (we&amp;rsquo;ll call this a Single Build Report),In the project (we&amp;rsquo;ll call this a Single Project Report),In the summary of all the Maven 2 module builds associated with a multi-module Maven 2 build (we&amp;rsquo;ll call this an Aggregate Build Report), and finallyIn the Maven 2 project itself (we&amp;rsquo;ll call this an Aggregate Project Report).To make matters more confusing, each of these reports usually to implement different classes and need to implement different interfaces:Project Reports usually inherit from ActionableBuild Reports usually inherit from HealthReportingActionSingle Build Reports in Maven 2 projects need to implement AggregatableActionWhat we need is to put some common framework around these reports to ensure that we are not repeating ourselves all the time. In general, each of these four reports will be doing mostly the same things.The Build Reports will be displaying the results for a specific buildThe Project Reports will be displaying the results for the latest build (and possibly a trend chart if that makes sense)The Aggregate Reports will be displaying the aggregate of all the Single ReportsSound&amp;rsquo;s like a job for multiple inheritance! Fortune would have it that Java does not support multiple inheritance, so we will have to use some form of composition to get the same effect, and generics can help reduce the repetition too. But enough! On to the solution.AbstractBuildActionWe&amp;rsquo;ll start with a parent class for all our Build Reports. We&amp;rsquo;ll make this class generic, parameterised by the Build class that it operates on, so that we can use the same core code for all the Build Reports:package hudson.plugins.helpers;import hudson.model.AbstractBuild;import hudson.model.HealthReportingAction;public abstract class AbstractBuildAction&amp;lt;BUILD extends AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;gt; implements HealthReportingAction { private BUILD build = null; protected AbstractBuildAction() { } public synchronized BUILD getBuild() { return build; } public synchronized void setBuild(BUILD build) { if (this.build == null &amp;amp;&amp;amp; this.build != build) { this.build = build; } }}We store a reference to the build in a local variable and provide a getter for the build. Ideally we would like to the build variable to be final and initialize it in the constructor. However, Hudson&amp;rsquo;s remoting interface will get in the way of this for any actions created on the slave. The solution is to use a setter to set the build. Additionally, we have some logic that makes this setter write-once. This is just a safety net to stop us from accidentally confusing Hudson. Strictly speaking, if you are careful the setter can be justa a simple setter and not write once.[Correction] We also need to modify BuildProxy so that it calls our setter for us for actions added from slave side executions:package hudson.plugsin.helpers;&amp;hellip;public final class BuildProxy implements Serializable { &amp;hellip; private final List&amp;lt;AbstractBuildAction&amp;lt;AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;raquo; actions = new ArrayList&amp;lt;AbstractBuildAction&lt;!-- raw HTML omitted --&gt;&amp;raquo;(); &amp;hellip; public void updateBuild(AbstractBuild&amp;lt;,?&amp;gt; build) { for (AbstractBuildAction&amp;lt;AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;gt; action: actions) { if (!build.getActions().contains(action)) { action.setBuild(build); build.getActions().add(action); } } if (result != null &amp;amp;&amp;amp; result.isWorseThan(build.getResult())) { build.setResult(result); } } &amp;hellip; public List&amp;lt;AbstractBuildAction&amp;lt;AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;raquo; getActions() { return actions; } &amp;hellip;}[/Correction]In addition to these simple getters and setters, we want to provide a framework for displaying the report detail. Each different type of report has different ways of fitting into the Hudson UI. We are going to attempt to standardise these by using wrapper .jelly files to call a standard set which implementing classes can override. Jelly files are stored as resources in the hudson plugin, so with the Maven2 project structure for a Hudson plugin, the java source is /src/main/java/hudson/plugins/helpers/AbstractBuildAction.java and the jelly files for this java class are in /src/main/resources/hudson/plugins/helpers/AbstractBuildAction/. The basic things that all build reports want to do are as follows:A main report detail page (e.g. package level summary of the number of lines of code)A graph of some sort, with the option to enlarge it. (e.g. trend graph of the number of lines of code)A simple summary of the report for the main page (i.e. &amp;ldquo;17,345 lines of code (+1,534)&amp;quot;)We will implement this functionality with some properties of the AbstractBuildAction, and some default .jelly files. First the additional properties:&amp;hellip;public abstract class AbstractBuildAction&amp;lt;BUILD extends AbstractBuild&lt;!-- raw HTML omitted --&gt;&amp;gt; implements HealthReportingAction { &amp;hellip; public boolean isFloatingBoxActive() { return false; } public boolean isGraphActive() { return false; } public String getGraphName() { return getDisplayName(); } public String getSummary() { return &amp;ldquo;&amp;rdquo;; }}These four properties will be used to control how the action appears. isFloatingBoxActive allows us to enable the floating box on the build summary page. isGraphActive allows us to activate the graph inside the floating box. getGraphName should return the title that will be displayed above the graph. And finally, getSummary will control the summary text to display beside the build report icon on the build summary page.Next we have some empty default place-holder jelly files. These will be the jelly files that we can override in our actual reports:reportDetail.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;rdquo; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;normalGraph.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;largeGraph.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;The reportDetail.jelly page will be used for the main report detail page, the normalGraph.jelly page will be used for the floating trend graph, while the largeGraph.jelly page will be used for the enlarged graph. To hook these pages into the Hudson framework, we need the following jelly pages:index.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot; css=&amp;quot;/plugin/javancss/css/style.css&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.build}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.displayName}&lt;!-- raw HTML omitted --&gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;st:include page=&amp;ldquo;reportDetail.jelly&amp;rdquo;/&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;This page will also include the trend graph if it is activefloatingBox.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; ${from.graphName} &lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;enlarge&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;/j:if&amp;gt;&amp;lt;/j:jelly&amp;gt;summary.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot; xmlns:i=&amp;ldquo;jelly:fmt&amp;rdquo;&amp;gt; &amp;lt;t:summary icon=&amp;quot;${it.iconFileName}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.displayName}&lt;!-- raw HTML omitted --&gt; ${it.summary} &amp;lt;/t:summary&amp;gt; &amp;lt;j:if test=&amp;quot;${it.floatingBoxVisible}}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;floatingBox.jelly&amp;rdquo;/&amp;gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;/j:if&amp;gt;&amp;lt;/j:jelly&amp;gt;Note that the build main page does not support floating boxes, so we have to hack it in via the summary.jelly pageenlargedGraph.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot; css=&amp;quot;/plugin/javancss/css/style.css&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.build}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;largeGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;AbstractProjectActionThis is similar to AbstractBuildAction, however, we don&amp;rsquo;t have to deal with the write-once setter problem.package hudson.plugins.helpers;import hudson.model.AbstractProject;import hudson.model.Actionable;abstract public class AbstractProjectAction&amp;lt;PROJECT extends AbstractProject&lt;!-- raw HTML omitted --&gt;&amp;gt; extends Actionable { private final PROJECT project; protected AbstractProjectAction(PROJECT project) { this.project = project; } public PROJECT getProject() { return project; } public boolean isFloatingBoxActive() { return true; } public boolean isGraphActive() { return false; } public String getGraphName() { return getDisplayName(); }}Again we have a set of jelly files, we&amp;rsquo;ll repeat the same placeholders:reportDetail.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;normalGraph.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;largeGraph.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt;&amp;lt;/j:jelly&amp;gt;The other link in pages are similar, only changing from a reference for ${it.build} to ${it.project}index.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot; css=&amp;quot;/plugin/javancss/css/style.css&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.project}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.displayName}&lt;!-- raw HTML omitted --&gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;st:include page=&amp;ldquo;reportDetail.jelly&amp;rdquo;/&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;floatingBox.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot; xmlns:i=&amp;ldquo;jelly:fmt&amp;rdquo; xmlns:local=&amp;ldquo;local&amp;rdquo;&amp;gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; ${from.graphName} &lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;normalGraph.jelly&amp;rdquo;/&amp;gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;enlarge&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;/j:if&amp;gt;&amp;lt;/j:jelly&amp;gt;The project page automatically includes the floating box, so we don;t require the summary hackenlargedGraph.jelly&amp;lt;j:jelly xmlns:j=&amp;ldquo;jelly:core&amp;rdquo; xmlns:st=&amp;ldquo;jelly:stapler&amp;rdquo; xmlns:d=&amp;ldquo;jelly:define&amp;rdquo; xmlns:l=&amp;quot;/lib/layout&amp;quot; xmlns:t=&amp;quot;/lib/hudson&amp;quot; xmlns:f=&amp;quot;/lib/form&amp;quot;&amp;gt; &amp;lt;l:layout xmlns:plugin=&amp;quot;/hudson/plugins/javancss/tags&amp;quot; css=&amp;quot;/plugin/javancss/css/style.css&amp;quot;&amp;gt; &amp;lt;st:include it=&amp;quot;${it.project}&amp;quot; page=&amp;ldquo;sidepanel.jelly&amp;rdquo;/&amp;gt; &amp;lt;l:main-panel&amp;gt; &amp;lt;j:if test=&amp;quot;${it.graphActive}&amp;quot;&amp;gt; &lt;!-- raw HTML omitted --&gt;${it.graphName}&lt;!-- raw HTML omitted --&gt; &amp;lt;st:include page=&amp;ldquo;largeGraph.jelly&amp;rdquo;/&amp;gt; &amp;lt;/j:if&amp;gt; &amp;lt;/l:main-panel&amp;gt; &amp;lt;/l:layout&amp;gt;&amp;lt;/j:jelly&amp;gt;SummaryThat&amp;rsquo;s it for part 5, next time we will implement the javancss parser and get the results for a build. Part 7 will finish off the plugin with the reports based on these two base classes.&lt;/p&gt;</description></item><item><title>Writing a Hudson plug-in (Part 1 – Preparation)</title><link>https://stephenc.github.io/post/2008-01-13-writing-a-hudson-plug-in-part-1-preparation/</link><pubDate>Sun, 13 Jan 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-01-13-writing-a-hudson-plug-in-part-1-preparation/</guid><description>&lt;p&gt;Writing a Hudson plug-in (Part 1 – Preparation)This is the first part of a tutorial on writing a Hudson plug-in. The aim of this tutorial is to develop a Publisher for JavaNCSS. This publisher will work with both Hudson Freestyle projects and Hudson Maven2 projects. The publisher will also include a trend graph.Before we can start plug-in development, we need to have a set of working projects to throw at our plugin. Ideally these projects should be simple and quick to build, but the most essential thing is that they build and run the tool that we want to publish the results of! We need a minimum of three projects:Ant-based projectMaven2-based single module projectMaven2-based multiple module projectSo we will develop these three basic projects, get them running the JavaNCSS tool, and then ensure they build in Hudson.The Ant-based projectWe’ll start with the Ant based project. First we’ll need a directory structure:project/ src/ main/ test/ lib/ tools/ javancss/Next we need to download the library dependencies to the lib folder (for example junit.jar) and the custom ant tasks to the appropriate sub-folder of tools.You can get JUnit.jar from &lt;a href="http://www.junit.org"&gt;http://www.junit.org&lt;/a&gt;.The JavaNCSS jars are available at &lt;a href="http://www.kclee.de/clemens/java/javancss/"&gt;http://www.kclee.de/clemens/java/javancss/&lt;/a&gt; (Note this is the .de domain, not the .com domain). JavaNCSS comes as a zip file, so we’ll just extract the three jar files that we need: ccl.jar, javancss.jar and jhbasic.jarAt this point we should have the followingproject/ src/ main/ test/ lib/ junit.jar tools/ javancss/ ccl.jar javancss.jar jhbasic.jarNext we need a build file, and some sample java files to build. Here is a sample build.xml that will do most of what we want:&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &amp;lt;pathelement location=&amp;quot;${basedir}/tools/javancss/jhbasic.jar&amp;quot; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;We can then write some simple java classes and test our build. We’ll start with a simple HelloWorld.javapackage com.onedash.hello;/*** A basic hello world application.** @author Stephen Connolly*/public class Hello { public String sayHello(String name) { return &amp;ldquo;Hello &amp;quot; + name; } public static void main(String[] args) { Hello instance = new Hello(); if (args.length == 1) { System.out.println(instance.sayHello(args[0])); } else { System.out.println(instance.sayHello(&amp;ldquo;world&amp;rdquo;)); } }}At this point we should have the following project structure:project/ build.xml src/ main/ com/ onedash/ hello/ Hello.java test/ lib/ junit.jar tools/ javancss/ ccl.jar javancss.jar jhbasic.jarAnd running ANT should give output like:C:\local\project&amp;gt;ant clean distBuildfile: build.xmlclean:[delete] Deleting directory C:\local\project\build[delete] Deleting directory C:\local\project\distcompile: [mkdir] Created dir: C:\local\project\build\classes [javac] Compiling 5 source files to C:\local\project\build\classescompile-tests: [mkdir] Created dir: C:\local\project\build\testcases [javac] Compiling 1 source file to C:\local\project\build\testcasestest: [mkdir] Created dir: C:\local\project\build\testcases\reportsjavancss:[javancss] Generating reportdist: [mkdir] Created dir: C:\local\project\dist [jar] Building jar: C:\local\project\dist\SimpleAntProject.jarBUILD SUCCESSFULTotal time: 3 secondsAnd there should be a javancss-report.xml file in the build directory. That should be enough for an ANT project. Some extra finesse would be to add some more source code so we can examine the structure of the xml report.The Maven2 based single module projectFirst we’ll need a directory structure:project/ src/ main/ java/ test/ java/Next we need a pom.xml to describe the project for Maven2. Here is a simple pom.xml:&lt;!-- raw HTML omitted --&gt; xsi:schemaLocation=&amp;ldquo;&lt;a href="http://maven.apache.org/POM/4.0.0"&gt;http://maven.apache.org/POM/4.0.0&lt;/a&gt; &lt;a href="http://maven.apache.org/maven-v4_0_0.xsd%22%3E"&gt;http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&amp;gt;&lt;/a&gt; &lt;!-- raw HTML omitted --&gt;4.0.0&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.hudson&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;SimpleM2Project&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;SimpleM2Project&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1.0-SNAPSHOT&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;jar&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;junit&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;4.4&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;test&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;package&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;org.codehaus.mojo&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;javancss-maven-plugin&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;process-sources&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;report&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;We can reuse the Hello.java from the Ant project, so at this point we should have the following directory structure:project/ pom.xml src/ main/ java/ com/ onedash/ hello/ Hello.java test/ java/And running maven should give the following output:C:\local\project&amp;gt;mvn clean package[INFO] Scanning for projects&amp;hellip;[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] Building SimpleM2Project[INFO] task-segment: [clean, package][INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] [clean:clean][INFO] Deleting directory C:\local\project\target[INFO] Deleting directory C:\local\project\target\classes[INFO] Deleting directory C:\local\project\target\test-classes[INFO] Deleting directory C:\local\project\target\site[INFO] [javancss:report {execution: default}][WARNING] Unable to locate Source XRef to link to - DISABLED[INFO] [resources:resources][INFO] Using default encoding to copy filtered resources.[INFO] [compiler:compile][INFO] Compiling 1 source files to C:\local\project\target\classes[INFO] [resources:testResources][INFO] Using default encoding to copy filtered resources.[INFO] [compiler:testCompile][INFO] Nothing to compile - all classes are up to date[INFO] [surefire:test][INFO] No tests to run.[INFO] [jar:jar][INFO] Building jar: C:\local\project\target\SimpleM2Project-1.0-SNAPSHOT.jar[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] BUILD SUCCESSFUL[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] Total time: 5 seconds[INFO] Finished at: Sun Jan 13 22:06:20 GMT 2008[INFO] Final Memory: 5M/10M[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;And there should be a javancss-raw-report.xml file in the target directory.The Maven2 based multi-module projectWe can generate this project in its simplest form just by adding the simple project as a child of a project with &lt;!-- raw HTML omitted --&gt;pom&lt;!-- raw HTML omitted --&gt;. We’ll start off with the following directory structure:project/ SimpleM2Project pom.xml src/ main/ java/ com/ onedash/ hello/ Hello.java test/ java/Where the SimpleM2Project subtree is a copy of the previous project. All we now need is a pom.xml to nest this project in:&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;4.0.0&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;com.onedash.mvn.hudson&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;MultiM2Project&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;MultiM2Project&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1.0-SNAPSHOT&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;pom&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;SimpleM2Project&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;And running maven should give the following output:C:\local\project&amp;gt;mvn clean package[INFO] Scanning for projects&amp;hellip;[INFO] Reactor build order:[INFO] SimpleM2Project[INFO] MultiM2Project[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] Building SimpleM2Project[INFO] task-segment: [clean, package][INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] [clean:clean][INFO] Deleting directory C:\local\project\SimpleM2Project\target[INFO] Deleting directory C:\local\project\SimpleM2Project\target\classes[INFO] Deleting directory C:\local\project\SimpleM2Project\target\test-classes[INFO] Deleting directory C:\local\project\SimpleM2Project\target\site[INFO] [javancss:report {execution: default}][WARNING] Unable to locate Source XRef to link to - DISABLED[INFO] [resources:resources][INFO] Using default encoding to copy filtered resources.[INFO] [compiler:compile][INFO] Compiling 1 source files to C:\local\project\SimpleM2Project\target\classes[INFO] [resources:testResources][INFO] Using default encoding to copy filtered resources.[INFO] [compiler:testCompile][INFO] No sources to compile[INFO] [surefire:test][INFO] No tests to run.[INFO] [jar:jar][INFO] Building jar: C:\local\project\SimpleM2Project\target\SimpleM2Project-1.0-SNAPSHOT.jar[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] Building MultiM2Project[INFO] task-segment: [clean, package][INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] [clean:clean][INFO] Deleting directory C:\local\project\target[INFO] Deleting directory C:\local\project\target\classes[INFO] Deleting directory C:\local\project\target\test-classes[INFO] Deleting directory C:\local\project\target\site[INFO] [site:attach-descriptor][INFO][INFO][INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] Reactor Summary:[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] SimpleM2Project &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; SUCCESS [7.240s][INFO] MultiM2Project &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. SUCCESS [2.754s][INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] BUILD SUCCESSFUL[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] Total time: 10 seconds[INFO] Finished at: Sun Jan 13 22:16:37 GMT 2008[INFO] Final Memory: 7M/15M[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;And there should be a javancss-raw-report.xml file in the SimpleM2Project/target directory.The Hudson setupWe’ll start by running mvn hpi:create to create a base to work from:C:\local&amp;gt;mvn hpi:create[INFO] Scanning for projects&amp;hellip;[INFO] Searching repository for plugin with prefix: &amp;lsquo;hpi&amp;rsquo;.[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] Building Maven Default Project[INFO] task-segment: [hpi:create] (aggregator-style)[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&amp;hellip;[INFO] [hpi:create]Enter the groupId of your plugin: org.jvnet.hudson.plugins[INFO] Defaulting package to group ID: org.jvnet.hudson.pluginsEnter the artifactId of your plugin: javancss&amp;hellip;[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] BUILD SUCCESSFUL[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;[INFO] Total time: 2 minutes 44 seconds[INFO] Finished at: Sun Jan 13 22:34:58 GMT 2008[INFO] Final Memory: 8M/15M[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;The result should be a sub-directory called javancss with a pom.xml file and a basic Hudson plugin starting point. We’ll edit the pom.xml to update the version of Hudson to the latest (at the time of writing 1.170) and launch a live development instance to set our projects up in.Open up the pom.xml file, and change the &lt;!-- raw HTML omitted --&gt;1.153&lt;!-- raw HTML omitted --&gt; tags for the hudson-core and hudson-war dependencies to 1.170.The dependency section should now look like this:&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;org.jvnet.hudson.main&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;hudson-core&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1.170&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;provided&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;org.jvnet.hudson.main&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;hudson-war&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;war&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;1.170&lt;!-- raw HTML omitted --&gt; &lt;!-- raw HTML omitted --&gt;test&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Next launch a copy of Hudson by running mvn hpi:runC:\local\javancss&amp;gt;mvn hpi:run[INFO] Scanning for projects&amp;hellip;[INFO] Searching repository for plugin with prefix: &amp;lsquo;hpi&amp;rsquo;.[INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] Building Unnamed - org.jvnet.hudson.plugins:javancss:hpi:1.0-SNAPSHOT[INFO] task-segment: [hpi:run][INFO] &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-[INFO] Preparing hpi:run&amp;hellip;[INFO] Started Jetty Server[INFO] Starting scanner at interval of 1 seconds.Now fire up a web browser for http://localhost:8080/We want to create five projects: Freestyle project for the Simple Ant projectFreestyle project for the Single module Maven2 projectFreestyle project for the Multi-module Maven2 projectMaven2 project for the Single module Maven2 projectMaven2 project for the Multi-module Maven2 projectFor extra finesse, we can add a slave executor, and create a second set of these projects tied to the slave. An final extra project that does nothing other than trigger all the other projects to build is the icing on the cake.&lt;/p&gt;</description></item><item><title>Writing a Hudson plug-in (Part 2 – Understanding m2 and freestyle projects)</title><link>https://stephenc.github.io/post/2008-01-01-writing-a-hudson-plug-in-part-2-understanding-m2-and-freestyle-projects/</link><pubDate>Tue, 01 Jan 2008 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2008-01-01-writing-a-hudson-plug-in-part-2-understanding-m2-and-freestyle-projects/</guid><description>&lt;p&gt;Before we proceed with developing the plugin, there is an important concept to understand: How the different project types invoke their plugins.Currently, one of the biggest source of confusion for end users of Hudson is that most of the plugins do not work with the &amp;ldquo;m2 project type&amp;rdquo;. This is because there are essentially two completely different implementations of plugins.&amp;ldquo;Normal&amp;rdquo; Plugins&amp;quot;Normal&amp;quot; plugins work with all project types except the &amp;ldquo;m2 project type&amp;rdquo;. Typically they will extend Publisher. The model of execution is that the Publisher is invoked on the Hudson Master and can invoke actions remotely on the slave.The plugin author must be mindfull that they do not overload the master with excessive work, either by minimising the amount of work to be performed, or by sending work to the slave for execution. Best performance will be achieved if the heavy lifting is performed on the slave and then finally the results are sent to the master. Multiple trips back and forth between the master and the slave will not be performant.&amp;ldquo;Maven&amp;rdquo; Plugins&amp;quot;Maven&amp;quot; plugins only work with the &amp;ldquo;m2 project type&amp;rdquo;. They must extend MavenReporter. Contrary to the &amp;ldquo;Normal&amp;rdquo; plugins, they are executed on the Slave. This is because they are invoked as call-backs from the Maven Embedded that is running on the slave. If the MavenReporter is able to invoke actions remotely on the Master.The plugin author does not have to be as mindful about overloading the master, as by default, they are executing on the slave, however, the side effect is that the plugin does not have full access to all the Hudson objects, and must usually send work to the master, e.g. to add an Action to a build, it is necessary to serialize the Action, send it to the master along with a Callable that then takes the deserialized Action and adds it to the real Build. (Note: Adding an action is such a common task that BuildProxy provides convenience methods to do this for us)Don&amp;rsquo;t Repeat YourselfThe result of this split is that it can be difficult to keep the DRY principles when developing Hudson plugins. Looking at what all plugins do, though, there is a standard pattern for most Publishing plugins:Determine where the information to be published is to be foundProcess/extract the information on the slaveSend the persistent result of the build to the masterFinalize processing of the information on the masterStrictly speaking only one of the last two steps is required, however, in most cases there is a trade-off between tasks that are more performant when executed on the slave and tasks that must be performed on the master as either the required information is not available on the slave or the activity will affect the object instances on the master as an artifact of the serialization call-by-value that occurs on the slave.Thus to keep the DRY principles we need to:Publisher or MavenReporter constructs a Configuration object.If the Configuration requires tasks to execute on the slave, ensure that it is sent to the slave and execute those tasks on the slave.If the Configuration requires tasks to execute on the master, send it (if necessary back) to the master and execute those tasks on the master.There are other issues with respect to Actions, i.e. Actions for a &amp;ldquo;m2 project type&amp;rdquo; must extend a specific subclass. However, this is not a problem, as there is nothing to stop us just having all the actions extend this type, the non-&amp;ldquo;m2 project type&amp;rdquo; usage will just ignore that it&amp;rsquo;s extending the subclass.What&amp;rsquo;s nextIn part 3, I will present a couple of wrapper classes that we can use to ensure that the DRY principle gives us plugin execution in one place. Part 4 will tie these wrapper classes into the Hudson plugin framework, giving us a MavenReporter and a Publisher that both use common code to deliver the plugin functionality. Part 5 will add aggregated reporting for m2 project. Part 6 will add simple trend graphs. Part 7 will close out by actually parsing the JavaNCSS files and implementing our plugin!&lt;/p&gt;</description></item><item><title>JPA, equals() and hashCode()</title><link>https://stephenc.github.io/post/2007-12-14-jpa-equals-and-hashcode/</link><pubDate>Fri, 14 Dec 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-12-14-jpa-equals-and-hashcode/</guid><description>&lt;p&gt;&lt;a href="http://burtbeckwith.com/blog/?p=53"&gt;http://burtbeckwith.com/blog/?p=53&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Combining Hibernate and Facelets with Maven, Netbeans and Glassfish</title><link>https://stephenc.github.io/post/2007-11-21-combining-hibernate-and-facelets-with-maven-netbeans-and-glassfish/</link><pubDate>Wed, 21 Nov 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-11-21-combining-hibernate-and-facelets-with-maven-netbeans-and-glassfish/</guid><description>&lt;p&gt;Note to self, for later reading&lt;/p&gt;
&lt;p&gt;&lt;a href="http://technology.amis.nl/blog/?p=2610"&gt;http://technology.amis.nl/blog/?p=2610&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Not sure why netbeans is essential on this!&lt;/p&gt;</description></item><item><title>Sventon and Hudson</title><link>https://stephenc.github.io/post/2007-11-14-sventon-and-hudson/</link><pubDate>Wed, 14 Nov 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-11-14-sventon-and-hudson/</guid><description>&lt;p&gt;This morning I discovered sventon (&lt;a href="http://www.sventon.org"&gt;http://www.sventon.org&lt;/a&gt;) a Subversion (&lt;a href="http://subversion.tigris.org/"&gt;http://subversion.tigris.org/&lt;/a&gt;) repository browser written in Java. And it&amp;rsquo;s free! Ten minutes later I had this integrated as a Repository browser in Hudson (&lt;a href="https://hudson.dev.java.net/"&gt;https://hudson.dev.java.net/&lt;/a&gt; will be available in build 1.157) and I&amp;rsquo;m loving it. It&amp;rsquo;s not quite as good as fisheye&amp;hellip; but it does everything I need it to!&lt;/p&gt;
&lt;p&gt;Hudson is &lt;em&gt;really&lt;/em&gt; starting to have kick-ass features that leave everything else for dust.&lt;/p&gt;</description></item><item><title>Hudson Coverage plugin</title><link>https://stephenc.github.io/post/2007-11-06-hudson-coverage-plugin/</link><pubDate>Wed, 07 Nov 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-11-06-hudson-coverage-plugin/</guid><description>&lt;p&gt;Note to self, here are some code coverage tools for .NET that are free to use&amp;hellip; and therefore good candidates for having the Coverage plugin for Hudson support off the shelf:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://sourceforge.net/projects/partcover/"&gt;http://sourceforge.net/projects/partcover/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.gotdotnet.com/Community/UserSamples/Details.aspx?SampleGuid=881a36c6-6f45-4485-a94e-060130687151"&gt;http://www.gotdotnet.com/Community/UserSamples/Details.aspx?SampleGuid=881a36c6-6f45-4485-a94e-060130687151&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Stumbled upon</title><link>https://stephenc.github.io/post/2007-10-08-stumbled-upon/</link><pubDate>Mon, 08 Oct 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-10-08-stumbled-upon/</guid><description>&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A UML renderer written in Java
&lt;a href="http://snipsnap.org/space/SnipGraph/UML+ExampleA"&gt;http://snipsnap.org/space/SnipGraph/UML+ExampleA&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sequence Diagram renderer written in Java
&lt;a href="http://sdedit.sourceforge.net/"&gt;http://sdedit.sourceforge.net/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A more complex set of UML digrams from UMLet
&lt;a href="http://www.umlet.com/"&gt;http://www.umlet.com/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A JavaScript code formatter
&lt;a href="http://code.google.com/p/google-code-prettify/"&gt;http://code.google.com/p/google-code-prettify/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>JAX-WS 2.1 madness</title><link>https://stephenc.github.io/post/2007-09-05-jax-ws-21-madness/</link><pubDate>Wed, 05 Sep 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-09-05-jax-ws-21-madness/</guid><description>&lt;p&gt;I am sick of the fun that is getting JAX-WS 2.1 to work on JVM 1.6.&lt;/p&gt;
&lt;p&gt;Oh, copy these four jars into the endorsed directory and then you can use JAX-WS 2.1&amp;hellip; oh but sometimes it won&amp;rsquo;t work for some unknown reason and then it will work again.&lt;/p&gt;
&lt;p&gt;How you are supposed to explain this to end users, I don&amp;rsquo;t know.&lt;/p&gt;
&lt;p&gt;So next you need a platform specific installer to put those jars into the correct location, or a platform specific start script to tell the JVM about my alternate endorsed lib folder&amp;hellip; or do I write a self-extracting jar file that exctracts the libs and forks a second JVM&amp;hellip; no that won&amp;rsquo;t work for people wanting to use my library..&lt;/p&gt;</description></item><item><title>pom for jsf-comp.sf.net's chartcreator</title><link>https://stephenc.github.io/post/2007-08-01-pom-for-jsf-compsfnets-chartcreator/</link><pubDate>Thu, 23 Aug 2007 01:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-08-01-pom-for-jsf-compsfnets-chartcreator/</guid><description>&lt;p&gt;Not perfect, but enough to get you going.&lt;/p&gt;
&lt;p&gt;To build with this pom:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;You will need to grab the sources from &lt;a href="http://downloads.sourceforge.net/jsf-comp/chartcreator-1.2.0.source.zip"&gt;http://downloads.sourceforge.net/jsf-comp/chartcreator-1.2.0.source.zip&lt;/a&gt; and extract into &lt;code&gt;src/main/java&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;You will need to grab the &lt;code&gt;jar&lt;/code&gt; and extract the three files in the &lt;code&gt;META-INF&lt;/code&gt; (not &lt;code&gt;MANIFEST.MF&lt;/code&gt;) into &lt;code&gt;src/main/resources/META-INF&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then you can install away to your hearts content.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34;?&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;project&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;xmlns=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;http://maven.apache.org/POM/4.0.0&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;xmlns:xsi=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span style="color:#f92672"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;net.sf.jsf-comp&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;chartcreator&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2.0-mavenized&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;jar&lt;span style="color:#f92672"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;ChartCreator&lt;span style="color:#f92672"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.4&lt;span style="color:#f92672"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.4&lt;span style="color:#f92672"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.faces&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsf-api&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2-b19&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span style="color:#f92672"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.faces&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsf-impl&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2-b19&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span style="color:#f92672"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.sun.facelets&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsf-facelets&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.1.11&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span style="color:#f92672"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.servlet.jsp&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsp-api&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.1&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span style="color:#f92672"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.portlet&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;portlet-api&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span style="color:#f92672"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.servlet&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;servlet-api&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.5&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span style="color:#f92672"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;jfree&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jfreechart&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0.5&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Near minimal Maven 2 pom.xml for Jetty development of Facelets applications using JSF RI 1.2</title><link>https://stephenc.github.io/post/2007-08-23-near-minimal-maven-2-pomxml-for-jetty-development-of-facelets-applications-using-jsf-ri-12/</link><pubDate>Thu, 23 Aug 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-08-23-near-minimal-maven-2-pomxml-for-jetty-development-of-facelets-applications-using-jsf-ri-12/</guid><description>&lt;p&gt;Spent ages trying to get close to this&amp;hellip; gave up looking at what others had done, here is my version from scratch:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34;?&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;project&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;xmlns=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;http://maven.apache.org/POM/4.0.0&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;xmlns:xsi=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	 &lt;span style="color:#a6e22e"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#f92672"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span style="color:#f92672"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;....&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;....&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0-SNAPSHOT&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#f92672"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;war&lt;span style="color:#f92672"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#f92672"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;....&lt;span style="color:#f92672"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#f92672"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 	&lt;span style="color:#f92672"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 			&lt;span style="color:#f92672"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.5&lt;span style="color:#f92672"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 			&lt;span style="color:#f92672"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.5&lt;span style="color:#f92672"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 	&lt;span style="color:#f92672"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 	&lt;span style="color:#f92672"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.mortbay.jetty&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-jetty-plugin&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.1H.5-beta&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 		&lt;span style="color:#f92672"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 			&lt;span style="color:#f92672"&gt;&amp;lt;contextPath&amp;gt;&lt;/span&gt;/&lt;span style="color:#f92672"&gt;&amp;lt;/contextPath&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scanIntervalSeconds&amp;gt;&lt;/span&gt;10&lt;span style="color:#f92672"&gt;&amp;lt;/scanIntervalSeconds&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.faces&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsf-api&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2-b19&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.faces&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsf-impl&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2-b19&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.sun.facelets&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsf-facelets&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.1.11&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;commons-digester&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-digester&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.7&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;commons-beanutils&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-beanutils&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.7.0&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;commons-collections&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-collections&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.2&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.servlet&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jstl&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.1.0&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.servlet&lt;span style="color:#f92672"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;servlet-api&lt;span style="color:#f92672"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.5&lt;span style="color:#f92672"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span style="color:#f92672"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>JPA Entity exerciser</title><link>https://stephenc.github.io/post/2007-07-01-jpa-entity-exerciser/</link><pubDate>Fri, 20 Jul 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-07-01-jpa-entity-exerciser/</guid><description>&lt;p&gt;Working on this to add to EasyGloss.&lt;/p&gt;
&lt;p&gt;There are a number of rules that JPA entities must obey:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;equals&lt;/code&gt; and &lt;code&gt;hashCode&lt;/code&gt; must only be based on the persistent fields that are &lt;code&gt;@Id&lt;/code&gt; annotated.&lt;/li&gt;
&lt;li&gt;annotations must be applied to either fields or getters, no mix &amp;amp; match (although future versions of the spec may provide for such)&lt;/li&gt;
&lt;li&gt;In general, getters and setters should be simple methods (i.e. no complex processing)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I want to have a JPA Entity excerciser that will check these rules for you (and can be included in your unit tests)&lt;/p&gt;</description></item><item><title>hashCode() pitfalls with HashSet and HashMap</title><link>https://stephenc.github.io/post/2007-02-26-hashcode-pitfalls-with-hashset-and-hashmap/</link><pubDate>Mon, 26 Feb 2007 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2007-02-26-hashcode-pitfalls-with-hashset-and-hashmap/</guid><description>&lt;p&gt;I have been reading a book on C# recently, and it got me thinking about Java&amp;rsquo;s &lt;code&gt;hashCode()&lt;/code&gt; in a little bit more detail than I had before.&lt;/p&gt;
&lt;p&gt;Consider the following Java class.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Person&lt;/span&gt; { 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; String firstName; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; String surname; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Person&lt;/span&gt;(String firstName, String surname) { 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;firstName&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; firstName; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;surname&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; surname; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	} 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;boolean&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;equals&lt;/span&gt;(Object other) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		&lt;span style="color:#75715e"&gt;/* proper equals checking firstName and surname */&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	} 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;hashCode&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; code &lt;span style="color:#f92672"&gt;=&lt;/span&gt; surname.&lt;span style="color:#a6e22e"&gt;hashCode&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		code &lt;span style="color:#f92672"&gt;=&lt;/span&gt; 31 &lt;span style="color:#f92672"&gt;*&lt;/span&gt; code &lt;span style="color:#f92672"&gt;+&lt;/span&gt; firstName.&lt;span style="color:#a6e22e"&gt;hashCode&lt;/span&gt;(); 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		&lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; code; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	} 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; String &lt;span style="color:#a6e22e"&gt;getFirstName&lt;/span&gt;() { &lt;span style="color:#75715e"&gt;/* getter */&lt;/span&gt; } 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;setFirstName&lt;/span&gt;(String firstName) { &lt;span style="color:#75715e"&gt;/* setter */&lt;/span&gt; } 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; String &lt;span style="color:#a6e22e"&gt;getSurname&lt;/span&gt;() { &lt;span style="color:#75715e"&gt;/* getter */&lt;/span&gt; } 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;setSurname&lt;/span&gt;(String surname) { &lt;span style="color:#75715e"&gt;/* setter */&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;What is wrong with the above? Ignore that the hash code may not be well designed given that names are usually A-Z only and the prime factor may not be the most efficient algorithm for calculating hash codes for our data set.&lt;/p&gt;</description></item><item><title>How em.merge actually works</title><link>https://stephenc.github.io/post/2006-06-16-how-emmerge-actually-works/</link><pubDate>Fri, 16 Jun 2006 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-06-16-how-emmerge-actually-works/</guid><description>&lt;p&gt;Let&amp;rsquo;s have a look at some &lt;code&gt;em.merge&lt;/code&gt; related fun.&lt;/p&gt;
&lt;p&gt;From discussions on a number of forums, here is my explanation for what goes on when you call &lt;code&gt;em.merge&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We will use the following classes as an example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Entity&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Parent&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; List&lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt;Child&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; children;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ... &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; List&lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt;Child&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getChildren&lt;/span&gt;() { &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;children&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;setChildren&lt;/span&gt;(List&lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt;Child&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; children) { &lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;children&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; children; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;@Entity&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Child&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ... &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; Parent parent; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ... &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; Parent &lt;span style="color:#a6e22e"&gt;getParent&lt;/span&gt;() { &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;parent&lt;/span&gt;; } 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;setParent&lt;/span&gt;(Parent parent) { &lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;parent&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; parent; } 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To aid in understanding, we will assume that our client has a &lt;code&gt;UserTransaction ut&lt;/code&gt; (this is to allow us to force entity instances to become detached. Entity instances can becomedetached without using a &lt;code&gt;UserTransaction&lt;/code&gt;, however, we want to show what happens to the entities;&lt;/p&gt;</description></item><item><title>Another view on unit testing annotated entities</title><link>https://stephenc.github.io/post/2006-04-13-another-view-on-unit-testing-annotated-entities/</link><pubDate>Thu, 13 Apr 2006 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-04-13-another-view-on-unit-testing-annotated-entities/</guid><description>&lt;p&gt;Borys Burnayev has an interesting article with some useful ideas on testing annotated entities and EJB3 classes requiring injection to work.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www-128.ibm.com/developerworks/java/library/j-ejb3jpa.html"&gt;http://www-128.ibm.com/developerworks/java/library/j-ejb3jpa.html&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Unit testing of annotated classes (part 2)</title><link>https://stephenc.github.io/post/2006-04-12-unit-testing-of-annotated-classes-part-2/</link><pubDate>Wed, 12 Apr 2006 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-04-12-unit-testing-of-annotated-classes-part-2/</guid><description>&lt;p&gt;EasyGloss has been accepted as an incubator project on dev.java.net &lt;a href="https://easygloss.dev.java.net/"&gt;https://easygloss.dev.java.net/&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Unit testing of annotated classes</title><link>https://stephenc.github.io/post/2006-04-11-unit-testing-of-annotated-classes/</link><pubDate>Tue, 11 Apr 2006 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-04-11-unit-testing-of-annotated-classes/</guid><description>&lt;p&gt;I ran into some fun while trying to unit test my annotated entities as some of the annotations were on private fields.&lt;/p&gt;
&lt;p&gt;Rather than create constructors to do the injection for me, or change the access type on the fields, I came up with this little framework that people might be interested in. (Or be able to help improve)&lt;/p&gt;
&lt;p&gt;Temporary home: &lt;a href="http://www.stvconsultants.com/community/easygloss/"&gt;http://www.stvconsultants.com/community/easygloss/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Permanent home: hopefully on dev.java.net&lt;/p&gt;
&lt;p&gt;Has anyone any comments?&lt;/p&gt;</description></item><item><title>JUnit testing strategies for EJB3 entities and beans</title><link>https://stephenc.github.io/post/2006-04-07-junit-testing-strategies-for-ejb3-entities-and-beans/</link><pubDate>Fri, 07 Apr 2006 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-04-07-junit-testing-strategies-for-ejb3-entities-and-beans/</guid><description>&lt;p&gt;Here are my initial thoughts (which I posted as a forum comment elsewhere)&lt;/p&gt;
&lt;p&gt;Layer 0. Test the entity beans are deployable (You&amp;rsquo;ll need some of the framework from Layer 4 for this). Basically, you need to know that all your annotations work. Things to watch out for are multiple &lt;code&gt;@Id&lt;/code&gt; fields in one class or &lt;code&gt;@EmbeddedID&lt;/code&gt; or &lt;code&gt;@IdClass&lt;/code&gt; in conjunction with &lt;code&gt;@ManyToOne&lt;/code&gt;, &lt;code&gt;@ManyToMany&lt;/code&gt;, &lt;code&gt;@OneToMany&lt;/code&gt;, &lt;code&gt;@OneToOne&lt;/code&gt; and fun with &lt;code&gt;@JoinTable&lt;/code&gt;, &lt;code&gt;@JoinColumn&lt;/code&gt; and &lt;code&gt;@JoinColumns&lt;/code&gt;. Once you know how these are supposed to work with the specification, it&amp;rsquo;s not too bad to write it correctly each time. But there are some gotchas that will break things later on.&lt;/p&gt;</description></item><item><title>Nope, it's in the spec</title><link>https://stephenc.github.io/post/2006-03-20-nope-its-in-the-spec/</link><pubDate>Mon, 20 Mar 2006 02:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-03-20-nope-its-in-the-spec/</guid><description>&lt;p&gt;From the spec:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The deployment tool must first read the Java EE application deployment descriptor from the application &lt;code&gt;.ear&lt;/code&gt; file (&lt;code&gt;META-INF/application.xml&lt;/code&gt;). If the deployment descriptor is present, it fully specifies the modules included in the application. If no deployment descriptor is present, the deployment tool uses the following rules to determine the modules included in the application.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It would be nice if glassfish gave some warning that your &lt;code&gt;application.xml&lt;/code&gt; might not be completely specified!&lt;/p&gt;</description></item><item><title>application.xml related stuff</title><link>https://stephenc.github.io/post/2006-03-20-applicationxml-related-stuff/</link><pubDate>Mon, 20 Mar 2006 01:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-03-20-applicationxml-related-stuff/</guid><description>&lt;p&gt;I have been going nuts trying to trace problems with deployment ofenterprise applications and resource injection.&lt;br&gt;
I think the issue is around the &lt;code&gt;application.xml&lt;/code&gt; file in a &lt;code&gt;.ear&lt;/code&gt;! Without an &lt;code&gt;application.xml&lt;/code&gt; file, everything is fine and dandy. As soon as you add an &lt;code&gt;application.xml&lt;/code&gt; file, things start breaking&amp;hellip; it seems that when you have defined an &lt;code&gt;application.xml&lt;/code&gt; file only those modules that are defined in the &lt;code&gt;application.xml&lt;/code&gt; file are loaded. Without an &lt;code&gt;application.xml&lt;/code&gt; file, all the &lt;code&gt;.jar&lt;/code&gt; files are scanned for &lt;code&gt;@Stateless&lt;/code&gt; and &lt;code&gt;@Statefull&lt;/code&gt; annotations and the modules are inferred. It would help if there was some notification that maybe your &lt;code&gt;application.xml&lt;/code&gt; file was incomplete, or else some way of restoring the scanning behaviour if you want it. Now to go digging through the spec to see if I&amp;rsquo;m just stupidly missing something or if I need to file a bug report.&lt;/p&gt;</description></item><item><title>Rolling your own ELResolver</title><link>https://stephenc.github.io/post/2006-03-08-rolling-your-own-elresolver/</link><pubDate>Wed, 08 Mar 2006 03:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-03-08-rolling-your-own-elresolver/</guid><description>&lt;p&gt;ELResolvers are where you get to extend the new unified EL for your own pages. They are not that difficult to extend, it&amp;rsquo;s just a case of:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Have your class extend from &lt;code&gt;ELResolver&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Implement the abstract methods&lt;/li&gt;
&lt;li&gt;Add an &lt;code&gt;&amp;lt;el-resolver&amp;gt;&lt;/code&gt; element to your &lt;code&gt;&amp;lt;application&amp;gt;&lt;/code&gt; section in &lt;code&gt;faces-config.xml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Start using your resolver!&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;OK, so why would you want to do this? Well, for one it can make some things a lot easier. I was driven to find this solution in order to dynamically generate h:dataTables with variable numbers of columns.  Ordinarily you would need to bind the h:dataTable to a backing bean and have the backing bean add in the extra columns, but with &lt;code&gt;c:forEach&lt;/code&gt; now being compatible with JSF, we have an alternative.&lt;/p&gt;</description></item><item><title>Note to self</title><link>https://stephenc.github.io/post/2006-03-03-note-to-self/</link><pubDate>Fri, 03 Mar 2006 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-03-03-note-to-self/</guid><description>&lt;p&gt;The path to the solution to authorization woes could start here &lt;a href="http://www.thoughtsabout.net/blog/archives/000033.html"&gt;http://www.thoughtsabout.net/blog/archives/000033.html&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Keeping up with the latest glassfish builds</title><link>https://stephenc.github.io/post/2006-02-01-keeping-up-with-the-latest-glassfish-builds/</link><pubDate>Wed, 01 Feb 2006 00:00:00 +0000</pubDate><guid>https://stephenc.github.io/post/2006-02-01-keeping-up-with-the-latest-glassfish-builds/</guid><description>&lt;p&gt;Are you keeping up with the latest glassfish builds? Are you running windows 2k or higher? Are you fed up having to manually reinstall the server whenever a new weekly build comes out?&lt;/p&gt;
&lt;p&gt;Well I was, so here&amp;rsquo;s a very basic Windows NT command script.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@ECHO OFF
REM Change these environment variables to your own config

SET GLASSFISH_DOWNLOADS=c:\java\downloads
SET GLASSFISH_DRIVE=c:
SET GLASSFISH_PARENT_DIR=c:\java

REM Make sure we are in the correct location

%GLASSFISH_DRIVE%
CD %GLASSFISH_PARENT_DIR%

REM Find the latest build that has been downloaded

SET BUILD=aaa
FOR %%i IN (%GLASSFISH_DOWNLOADS%\glassfish-installer-9.0-*.jar) DO IF %%i GTR %BUILD% SET BUILD=%%i

IF A%BUILD%A==AaaaA GOTO no_build

CLS
ECHO .
ECHO .
ECHO Newest build found is: %BUILD%
IF EXIST glassfish.bld (TYPE glassfish.bld) ELSE (ECHO Current installed build: I don&amp;#39;t know)
ECHO .
ECHO .
ECHO .
ECHO [%0] About to remove current installation of Glassfish...
ECHO .
ECHO This will delete any currently deployed applications, so you would want to
ECHO either not care about them or have made a backup already!
ECHO .
ECHO .
ECHO This is your last chance to press Ctrl+C to abort otherwise
ECHO press any other key to continue...
PAUSE &amp;gt;&amp;gt; NUL
ECHO .
ECHO .
ECHO .
ECHO [%0] Stopping domain1...
ECHO .
CALL ASADMIN stop-domain domain1
ECHO .
ECHO .
ECHO .
ECHO [%0] Removing current installation...
ECHO .
RMDIR /S /Q %GLASSFISH_PARENT_DIR%\glassfish
ECHO .
ECHO .
ECHO .
ECHO [%0] Starting installer...
ECHO .JAVA -Xmx256m -jar %BUILD%
ECHO Current installed build: %BUILD% &amp;gt; glassfish.bld
ECHO .
ECHO .
ECHO .
ECHO [%0] Setting up domain1...
ECHO .
CD glassfish
CALL ANT -f setup.xml
ECHO .
ECHO .
ECHO .
ECHO [%0] Starting domain1...
ECHO .
CALL ASADMIN start-domain domain1
ECHO .
ECHO .
ECHO .
ECHO [%0] Glassfish reinstalled!
ECHO .
GOTO end

:no_build
ECHO .
ECHO .
ECHO .
ECHO Cannot find any glassfish builds in %GLASSFISH_DOWNLOADS%
ECHO .

:end
ECHO .
ECHO .
ECHO .
ECHO [%0] I&amp;#39;m done, press a key and I&amp;#39;ll be out of here...
ECHO .
PAUSE &amp;gt;&amp;gt; NUL
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Save it as, e.g. &lt;code&gt;REINSTALL-GLASSFISH.CMD&lt;/code&gt; and all you need to do is run it every time you download a new build!&lt;/p&gt;</description></item></channel></rss>