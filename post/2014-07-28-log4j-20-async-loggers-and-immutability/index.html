<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta name=viewport content="width=device-width"><script type=application/javascript src=https://stephenc.github.io/js/theme-mode.js></script><link rel=stylesheet href=https://stephenc.github.io/css/frameworks.min.css><link rel=stylesheet href=https://stephenc.github.io/css/github.min.css><link rel=stylesheet href=https://stephenc.github.io/css/github-style.css><link rel=stylesheet href=https://stephenc.github.io/css/light.css><link rel=stylesheet href=https://stephenc.github.io/css/dark.css><link rel=stylesheet href=https://stephenc.github.io/css/syntax.css><title>Log4j 2.0 Async loggers and immutability - Stephen's technical blog</title><link rel=icon type=image/x-icon href=https://stephenc.github.io/images/favicon.ico><meta name=theme-color content="#1e2327"><meta name=description content="One of the headline grabbing things that people seem to be raving about over Log4J 2.0 is async loggers.
Now do not get me wrong, they are great… as long as you know what you are doing.
If you are using async loggers you had better make sure you are only passing immutable objects to your loggers, because otherwise you may end up logging the state of your objects at the time of the log record being written and not the time you called log.
"><meta name=keywords content='blog'><meta name=robots content="noodp"><link rel=canonical href=https://stephenc.github.io/post/2014-07-28-log4j-20-async-loggers-and-immutability/><meta name=twitter:card content="summary"><meta name=twitter:title content="Log4j 2.0 Async loggers and immutability - Stephen's technical blog"><meta name=twitter:description content="One of the headline grabbing things that people seem to be raving about over Log4J 2.0 is async loggers.
Now do not get me wrong, they are great… as long as you know what you are doing.
If you are using async loggers you had better make sure you are only passing immutable objects to your loggers, because otherwise you may end up logging the state of your objects at the time of the log record being written and not the time you called log.
"><meta name=twitter:site content="https://stephenc.github.io/"><meta name=twitter:creator content><meta name=twitter:image content="https://stephenc.github.io/"><meta property="og:type" content="article"><meta property="og:title" content="Log4j 2.0 Async loggers and immutability - Stephen's technical blog"><meta property="og:description" content="One of the headline grabbing things that people seem to be raving about over Log4J 2.0 is async loggers.
Now do not get me wrong, they are great… as long as you know what you are doing.
If you are using async loggers you had better make sure you are only passing immutable objects to your loggers, because otherwise you may end up logging the state of your objects at the time of the log record being written and not the time you called log.
"><meta property="og:url" content="https://stephenc.github.io/post/2014-07-28-log4j-20-async-loggers-and-immutability/"><meta property="og:site_name" content="Log4j 2.0 Async loggers and immutability"><meta property="og:image" content="https://stephenc.github.io/"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2014-07-28 00:00:00 +0000 UTC"></head><body><div style=position:relative><header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on"><div class="Header-item mobile-none" style=margin-top:-4px;margin-bottom:-4px><a class=Header-link href=https://stephenc.github.io/><img class=octicon height=32 width=32 src=/images/top-icon.png></a></div><div class="Header-item d-md-none"><button class="Header-link btn-link js-details-target" type=button onclick='document.querySelector("#header-search").style.display=document.querySelector("#header-search").style.display=="none"?"block":"none"'>
<svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button></div><div style=display:none id=header-search class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex"><div class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"><div class=position-relative><form target=_blank id=search-form accept-charset=UTF-8 method=get autocomplete=off><label class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center"><input type=text class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" name=q placeholder=Search autocomplete=off></label></form></div></div></div><div class="Header-item Header-item--full flex-justify-center d-md-none position-relative"><a class=Header-link href=https://stephenc.github.io/><img class="octicon octicon-mark-github v-align-middle" height=32 width=32 src=/images/top-icon.png></a></div><div class=Header-item style=margin-right:0><a href=javascript:void(0) class="Header-link no-select" onclick=switchTheme()><svg style="fill:var(--color-profile-color-modes-toggle-moon)" class="no-select" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.52208 7.71754c3.05612.0 5.53362-2.47748 5.53362-5.5336C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961 9.95801 1.07727 10.3495.771159 10.6474.99992c1.4679 1.12724 2.4141 2.90007 2.4141 4.89391.0 3.40575-2.7609 6.16667-6.16665 6.16667-2.94151.0-5.40199-2.0595-6.018122-4.81523C.794841 6.87902 1.23668 6.65289 1.55321 6.85451 2.41106 7.40095 3.4296 7.71754 4.52208 7.71754z"/></svg></a></div></header></div><div id=search-result class="container-lg px-3 new-discussion-timeline" style=display:none></div><div class=application-main><div><main><div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4"><div class=px-0><div class="mb-3 d-flex px-3 px-md-3 px-lg-5"><div class="flex-auto min-width-0 width-fit mr-3"><div class=d-flex><div class="d-none d-md-block"><a class="avatar mr-2 flex-shrink-0" href=https://stephenc.github.io/><img class=avatar-user src=/images/avatar.jpg width=32 height=32></a></div><div class="d-flex flex-column"><h1 class="break-word f3 text-normal mb-md-0 mb-1"><span class=author><a href=https://stephenc.github.io/>Stephen Connolly</a>
</span><span class=path-divider>/</span>
<strong class="css-truncate css-truncate-target mr-1" style=max-width:410px><a href=https://stephenc.github.io/post/2014-07-28-log4j-20-async-loggers-and-immutability/>Log4j 2.0 Async loggers and immutability</a></strong></h1><div class="note m-0">Created <relative-time datetime="Mon, 28 Jul 2014 00:00:00 +0000" class=no-wrap>Mon, 28 Jul 2014 00:00:00 +0000</relative-time>
<span class=file-info-divider></span>
Modified <relative-time datetime="Mon, 28 Jul 2014 00:00:00 +0000" class=no-wrap>Mon, 28 Jul 2014 00:00:00 +0000</relative-time></div></div></div></div></div></div></div><div class="container-lg px-3 new-discussion-timeline"><div class="repository-content gist-content"><div><div class="js-gist-file-update-container js-task-list-container file-box"><div id=file-pytest class="file my-2"><div id=post-header class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style=z-index:2><div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto"><div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0"><summary id=toc-toggle onclick=clickToc() class="btn btn-octicon m-0 mr-2 p-2"><svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered"><path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zM3 8A1 1 0 111 8a1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"/></svg></summary><details-menu class=SelectMenu id=toc-details style="display: none;"><div class="SelectMenu-modal rounded-3 mt-1" style=max-height:340px><div class="SelectMenu-list SelectMenu-list--borderless p-2" style=overscroll-behavior:contain id=toc-list></div></div></details-menu>667 Words</div><div class="file-actions flex-order-2 pt-0"><a class="muted-link mr-3" href=/tags/java><svg class="octicon octicon-tag" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25.0 01.25-.25h5.025a.25.25.0 01.177.073l6.25 6.25a.25.25.0 010 .354l-5.025 5.025a.25.25.0 01-.354.0l-6.25-6.25A.25.25.0 012.5 7.775zm-1.5.0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464.0.91.184 1.238.513l6.25 6.25a1.75 1.75.0 010 2.474l-5.026 5.026a1.75 1.75.0 01-2.474.0l-6.25-6.25A1.75 1.75.0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"/></svg>
Java</a></div></div></div><div class="Box-body px-5 pb-5" style=z-index:1><article class="markdown-body entry-content container-lg"><p>One of the headline grabbing things that people seem to be raving about over Log4J 2.0 is async loggers.</p><p>Now do not get me wrong, they are great… as long as you know what you are doing.</p><p>If you are using async loggers you had better make sure you are only passing immutable objects to your loggers, because otherwise you may end up logging the state of your objects at the time of the log record being written and <em>not the time you called log</em>.</p><p>Now there are many other good reasons why you should use immutable objects for your logging, but async logging is the tipping point.</p><p>A few years ago I was burned by this exact class of problem in a conferencing call bridge, where we had a log message recording the participants that were actively talking (i.e. their volume was greater than the threshold). Spurious line noise would result in messages like:</p><pre tabindex=0><code>Bob has started talking, Bob’s volume is 1, threshold is 64
Bob has stopped talking, Bob’s volume is 120, threshold is 64
</code></pre><p>Which was a result of the mutable object that held the volume for Bob being changed by the media server in between creating the log record and writing the log record to disk.</p><p>Consider the following simple test class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> test;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.logging.log4j.LogManager;<span style=color:#f92672>import</span> org.apache.logging.log4j.Logger;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.concurrent.atomic.AtomicLong;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> AtomicLong value <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AtomicLong();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Long.<span style=color:#a6e22e>toString</span>(value.<span style=color:#a6e22e>get</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>next</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> value.<span style=color:#a6e22e>incrementAndGet</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 32; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> Thread() {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>final</span> Logger logger <span style=color:#f92672>=</span> LogManager.<span style=color:#a6e22e>getLogger</span>(App.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>final</span> App instance <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> App();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>@Override</span> 
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 100000; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                        logger.<span style=color:#a6e22e>warn</span>(<span style=color:#e6db74>&#34;{} == {}&#34;</span>, instance.<span style=color:#a6e22e>next</span>(), instance);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }.<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now run this code&mldr;</p><p>Here is the first few lines of logging output</p><pre tabindex=0><code>2014-07-28 15:59:45,729 WARN t.App [Thread-13] 13 == 13 
2014-07-28 15:59:45,730 WARN t.App [Thread-29] 29 == 29 
2014-07-28 15:59:45,729 WARN t.App [Thread-15] 15 == 15 
2014-07-28 15:59:45,729 WARN t.App [Thread-6] 6 == 6 
2014-07-28 15:59:45,730 WARN t.App [Thread-30] 30 == 30 
2014-07-28 15:59:45,729 WARN t.App [Thread-20] 20 == 20 
2014-07-28 15:59:45,729 WARN t.App [Thread-8] 8 == 8 
2014-07-28 15:59:45,730 WARN t.App [Thread-28] 28 == 28 
2014-07-28 15:59:45,729 WARN t.App [Thread-19] 19 == 19 
2014-07-28 15:59:45,729 WARN t.App [Thread-18] 18 == 18 
2014-07-28 15:59:45,729 WARN t.App [Thread-5] 5 == 6 
2014-07-28 15:59:45,731 WARN t.App [Thread-13] 33 == 37 
2014-07-28 15:59:45,731 WARN t.App [Thread-8] 39 == 39 
2014-07-28 15:59:45,731 WARN t.App [Thread-28] 40 == 41 
2014-07-28 15:59:45,731 WARN t.App [Thread-18] 42 == 43 
2014-07-28 15:59:45,731 WARN t.App [Thread-5] 43 == 43
</code></pre><p>Spot anything wrong with that?</p><p>Now of course I have written the class to have mutable state… because I wanted to test if Log4J 2.0 was capturing the `toString()`` at the time of logging… which it isn’t.</p><p>So if you have an object with a `toString()`` method that depends on mutable state, you will have to:</p><ul><li><p>Check that the logger is enabled for the logging level</p></li><li><p>Call <code>toString()</code> by hand</p></li><li><p>Pass the <code>toString()</code> result as the parameter.</p></li></ul><p>To make my previous code work with Asynchronous loggers (other than by fixing the mutable state) I would need to log like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>if</span> (logger.<span style=color:#a6e22e>isWarnEnabled</span>()) {
</span></span><span style=display:flex><span>    logger.<span style=color:#a6e22e>warn</span>(<span style=color:#e6db74>&#34;{} == {}&#34;</span>, instance.<span style=color:#a6e22e>next</span>(), instance.<span style=color:#a6e22e>toString</span>()); 
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Yep, we are back to that old pattern.</p><p>TL;DR Unless you know that <em>every</em> parameter object passed to a log statement is using immutable objects, enabling Asynchronous loggers in Log4J may well result in logs with messages you cannot trust.</p><h3 id=update>Update</h3><p>Here is the log4j2.xml configuration file I used</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- Don&#39;t forget to set system property-DLog4jContextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector to make all loggers asynchronous. --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Configuration</span> <span style=color:#a6e22e>status=</span><span style=color:#e6db74>&#34;WARN&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;Appenders&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- Async Loggers will auto-flush in batches, so switch off immediateFlush. --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;RandomAccessFile</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;RandomAccessFile&#34;</span> <span style=color:#a6e22e>fileName=</span><span style=color:#e6db74>&#34;async.log&#34;</span> <span style=color:#a6e22e>immediateFlush=</span><span style=color:#e6db74>&#34;false&#34;</span> <span style=color:#a6e22e>append=</span><span style=color:#e6db74>&#34;false&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;PatternLayout&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Pattern&gt;</span>%d %p %c{1.} [%t] %m %ex%n<span style=color:#f92672>&lt;/Pattern&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/PatternLayout&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/RandomAccessFile&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/Appenders&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;Loggers&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Root</span> <span style=color:#a6e22e>level=</span><span style=color:#e6db74>&#34;info&#34;</span> <span style=color:#a6e22e>includeLocation=</span><span style=color:#e6db74>&#34;false&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;AppenderRef</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;RandomAccessFile&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/Root&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/Loggers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Configuration&gt;</span>
</span></span></code></pre></div><p>Which is the example on the <a href=http://logging.apache.org/log4j/2.x/manual/async.html#AllAsync>Log4j Website</a></p></article></div></div></div></div></div></div></main></div><script type=application/javascript src=https://stephenc.github.io/js/toc.js></script><link rel=stylesheet href=https://stephenc.github.io/css/toc.css></div><footer style="text-align:center;padding:20px;border-top:1px solid #eee;margin-top:40px"><p style=margin:0;color:#666;font-size:14px>© 2025 Stephen Connolly
| <a href=# onclick="return resetCookieConsent(),!1" style=color:#666;text-decoration:underline>Cookie Settings</a></p></footer><div id=cookie-consent-banner style="display:none;position:fixed;bottom:0;left:0;right:0;background:#333;color:#fff;padding:15px;text-align:center;z-index:9999;box-shadow:0 -2px 10px rgba(0,0,0,.3)"><div style="max-width:1200px;margin:0 auto"><p style="margin:0 0 10px;font-size:14px">This website uses Google Analytics to help analyze how visitors use this site. By continuing to browse this site, you agree to this use.
<a href=# style=color:#4caf50;text-decoration:underline onclick="return showCookieDetails(),!1">Learn more</a></p><div><button onclick=acceptCookies() style="background:#4caf50;color:#fff;border:none;padding:8px 16px;margin:0 5px;cursor:pointer;border-radius:4px">Accept</button>
<button onclick=declineCookies() style="background:#f44336;color:#fff;border:none;padding:8px 16px;margin:0 5px;cursor:pointer;border-radius:4px">Decline</button></div></div></div><div id=cookie-details-modal style=display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:10000><div style=position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;border-radius:8px;max-width:500px;width:90%><h3 style=margin-top:0>Cookie Information</h3><p>This website uses Google Analytics, which uses cookies to collect anonymous information about how visitors use this site. This information is used to improve the website experience.</p><p><strong>What data is collected:</strong></p><ul><li>Pages visited and time spent on pages</li><li>How you arrived at the site</li><li>General location (country/city level)</li><li>Device and browser information</li></ul><p>No personally identifiable information is collected. You can opt out at any time by declining cookies.</p><button onclick=hideCookieDetails() style="background:#2196f3;color:#fff;border:none;padding:8px 16px;cursor:pointer;border-radius:4px">Close</button></div></div><script>function getCookieConsent(){return localStorage.getItem("cookieConsent")}function setCookieConsent(e){localStorage.setItem("cookieConsent",e)}function loadGoogleAnalytics(){var t,e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-CEQZZXVE7Q",document.head.appendChild(e),t=document.createElement("script"),t.innerHTML=`
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-CEQZZXVE7Q', {
        anonymize_ip: true,
        cookie_flags: 'SameSite=None;Secure'
      });
    `,document.head.appendChild(t)}function acceptCookies(){setCookieConsent("accepted"),document.getElementById("cookie-consent-banner").style.display="none",loadGoogleAnalytics()}function declineCookies(){setCookieConsent("declined"),document.getElementById("cookie-consent-banner").style.display="none"}function showCookieDetails(){document.getElementById("cookie-details-modal").style.display="block"}function hideCookieDetails(){document.getElementById("cookie-details-modal").style.display="none"}function resetCookieConsent(){localStorage.removeItem("cookieConsent"),document.getElementById("cookie-consent-banner").style.display="block"}document.addEventListener("DOMContentLoaded",function(){var e=getCookieConsent();e==="accepted"?loadGoogleAnalytics():e==="declined"||(document.getElementById("cookie-consent-banner").style.display="block")})</script></body><script type=application/javascript src=https://stephenc.github.io/js/github-style.js></script><script src=https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js></script><script type=application/javascript src=https://stephenc.github.io/js/search.js></script></html>